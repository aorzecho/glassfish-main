<?xml version="1.0" encoding="iso-8859-1"?>

<project name="corba source integration" default="build" basedir=".">
    <property file="${basedir}/build.properties"/>
    <echo message="glassfish-corba.version=${glassfish-corba.version}"/>
    <import file="build-taskdefs.xml"/>

    <target name="build" depends="init">
       <property name="local.maven.ant.tasks.jar" value="../../${maven.ant.tasks.jar}"/>
       <hg.clone tag="VERSION-${glassfish-corba.version}" repo="${glassfish-corba.hg.url}" dest="${glassfish-corba.dir}"/>

        <ant antfile="make/src-build.xml" dir="external/glassfish-corba">
            <target name="orb-library"/>
	    <target name="rename"/>
	</ant>
	<ant antfile="make/build.xml" dir="external/glassfish-corba/build/rename/ee">
	    <target name="build"/>
	    <target name="make-bundles"/>
	    <target name="release-local"/>
	</ant>
        <antcall target="glassfish-corba.publish.local"/>
     </target>

     <target name="glassfish-corba.publish.local">
<!--   <mvn.publish.local jar="${external.dir}/glassfish-corba/build/lib/jaxr-impl.jar" mvngroup="com.sun.xml.registry" mvnartid="jaxr-impl" mvnversion="${glassfish-corba.version}"/>
        <mvn.publish.local jar="${external.dir}/glassfish-corba/build/lib/jaxr-impl-src.jar" mvngroup="com.sun.xml.registry" mvnartid="jaxr-impl" mvnclassifier="sources" mvnversion="${jaxr-ri.version}"/>-->
        <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-asm.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-asm"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-asm.xml"/>
      <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-codegen.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-codegen"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-codegen.xml"/>
      <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-csiv2-idl.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-csiv2-idl"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-csiv2-idl.xml"/>
     <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-newtimer.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-newtimer"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-newtimer.xml"/>
    <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-omgapi.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-omgapi"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-omgapi.xml"/>
    <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-orb.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-orb"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-orb.xml"/>
    <mvn.publish.local
        mvnversion="${glassfish-corba.version}"
        generatepom="false"
        jar="${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-orbgeneric.jar"
        mvngroup="com.sun.corba" mvnartid="glassfish-corba-orbgeneric"
        extra-args="-DpomFile=${external.dir}/glassfish-corba/build/rename/ee/build/release/lib/bundles/glassfish-corba-orbgeneric.xml"/>



    </target>

</project>

