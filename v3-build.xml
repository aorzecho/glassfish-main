<?xml version="1.0" encoding="iso-8859-1"?>

<project name="These v3 modules are built before external since external has dependencies on them" default="build" basedir=".">
    <!-- import build.xml for init target and inherited properties -->
    <import file="build.xml"/>

    <target name="build">
        <antcall target="javax.transaction.build" />
        <antcall target="javax.resource.build" />
        <antcall target="javax.security.auth.message" />
    </target>

    <!-- wsit.xml has a dependency on javax.transaction -->
    <target name="javax.transaction.build" >
        <exec executable="mvn" dir="${v3.dir}" failonerror="true" >
	    <arg line="-Dmaven.repo.local=${maven.repo.local}" />
            <arg line="-pl transaction/javax.transaction" />
            <arg line="install" />
	</exec>
    </target>

    <!-- ejb/javax.ejb has a dependency on javax.annotation -->
    <target name="javax.annotation.build" >
        <exec executable="mvn" dir="${v3.dir}" failonerror="true" >
	    <arg line="-Dmaven.repo.local=${maven.repo.local}" />
            <arg line="-pl javaee-api/javax.annotation" />
            <arg line="install" />
	</exec>
    </target>

    <!-- ejb/javax.ejb has a dependency on javax.xml.rpc -->
    <target name="javax.xml.rpc.build" >
        <exec executable="mvn" dir="${v3.dir}" failonerror="true" >
	    <arg line="-Dmaven.repo.local=${maven.repo.local}" />
            <arg line="-pl javaee-api/javax.xml.rpc" />
            <arg line="install" />
	</exec>
    </target>


    <!-- wsit.xml has a dependency on javax.ejb -->
    <target name="javax.ejb.build" >
        <antcall target="javax.annotation.build" />
        <antcall target="javax.xml.rpc.build" />
        <exec executable="mvn" dir="${v3.dir}" failonerror="true" >
	    <arg line="-Dmaven.repo.local=${maven.repo.local}" />
            <arg line="-pl ejb/javax.ejb" />
            <arg line="install" />
	</exec>
    </target>

    <!-- wsit.xml has a dependency on javax.transaction -->
    <target name="javax.resource.build" >
        <exec executable="mvn" dir="${v3.dir}" failonerror="true" >
	    <arg line="-Dmaven.repo.local=${maven.repo.local}" />
            <arg line="-pl connectors/javax.resource" />
            <arg line="install" />
	</exec>
    </target>

    <!-- wsit.xml has a dependency on javax.security.auth.message -->
    <target name="javax.security.auth.message" >
        <exec executable="mvn" dir="${v3.dir}" failonerror="true" >
	    <arg line="-Dmaven.repo.local=${maven.repo.local}" />
            <arg line="-pl security/javax.security.auth.message" />
            <arg line="install" />
	</exec>
    </target>
</project>
