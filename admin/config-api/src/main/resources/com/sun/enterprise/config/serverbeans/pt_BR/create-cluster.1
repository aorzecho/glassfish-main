CREATE-CLUSTER(1)                                            CREATE-CLUSTER(1)

NOME
       create-cluster - cria um cluster GlassFish Server

SINOPSE
           create-cluster [--help] [--config config-name]
           [--systemproperties (name=value)[:name=value]*]
           [--properties (name=value)[:name=value]*]
           [--gmsenabled={true|false}]
           [--multicastport multicast-port]
           [--multicastaddress multicast-address]
           [--bindaddress bind-address]
           [--hosts hadb-host-list]
           [--haagentport port-number]
           [--haadminpassword password]
           [--haadminpasswordfile file-name] [--devicesize devicesize ]
           [--haproperty (name=value)[:name=value]*]
           [--autohadb=false] [--portbase port-number]
           cluster-name

DESCRIçãO
       O subcomandocreate-cluster cria um cluster do GlassFish Server.
       Inicialmente, o cluster não contém instâncias do GlassFish
       Server,aplicações ou recursos.

       Um cluster requer uma referência a uma configuração nomeada que defina
       a configuração de todas as instâncias adicionadas ao cluster. A
       configuração pode ser especificada no comando para criar o cluster, mas
       não é necessária. Se nenhuma configuração for especificada, o
       subcomando criará uma configuração denominada cluster-name-config para
       o cluster. O cluster criado é do tipo standalone porque a configuração
       do cluster não é compartilhada com quaisquer outros clusters ou
       instâncias standalone.

       Para adicionar instâncias ao cluster, defina a opção --cluster para o
       nome do cluster ao usar qualquer um dos seguintes subcomandos:

       ·   create-instance(1)

       ·   create-local-instance(1)

       Para deletar instâncias do servidor de cluster a qualquer momento, use
       um dos seguintes subcomandos:

       ·   delete-instance(1)

       ·   delete-local-instance(1)

       Para associar aplicações e recursos a todas as instâncias do cluster,
       defina a opção --target para o nome do cluster ao executar as seguintes
       operações:

       ·   Implantando aplicações ao usar o subcomando implantar(1)

       ·   Criando recursos usando subcomandos como create-jdbc-resource(1)

       ·   Criando referências às aplicações que já estão implantadas em
           outros destinos usando o subcomando create-application-ref(1)

       ·   Criando referências ao recursos que já estão criados em outros
           destinos usando o subcomando create-resource-ref(1)

       Esse subcomando só é suportado no modo remoto.

OPçõES
       --help, -?
           Exibe o texto de ajuda do subcomando.

       --config
           Especifica a configuração nomeada que o cluster referencia. A
           configuração deve existir e não pode ser chamada default-config ou
            server-config. Especificar a opção --config cria um cluster
           compartilhado. Se esta opção for omitida, um cluster standalone é
           criado.

       --systemproperties
           Define propriedades de sistema para a configuração criada para o
           cluster. Essas propriedades substituem os valores de propriedade na
           configuração default-config . As propriedades a seguir estão
           disponíveis:

           ASADMIN_LISTENER_PORT
               Esta propriedade especifica o número da porta HTTP ou HTTPS
               através da qual o DAS se conecta à instância para gerenciá-la.
               Os valores válidos são 1-65535. Em sistemas UNIX, criar
               soquetes que fazem listening nas portas 1 - 1024 exige
               privilégios de superusuários.

           HTTP_LISTENER_PORT
               Essa propriedade especifica o número de porta que é utilizada
               para interpretar solicitações HTTP. Os valores válidos são
               1-65535. Em sistemas UNIX, criar soquetes que fazem listening
               nas portas 1 - 1024 exige privilégios de superusuários.

           HTTP_SSL_LISTENER_PORT
               Essa propriedade especifica o número da porta que é utilizada
               para interpretar solicitações HTTPS. Os valores válidos são
               1-65535. Em sistemas UNIX, criar soquetes que fazem listening
               nas portas 1 - 1024 exige privilégios de superusuários.

           IIOP_LISTENER_PORT
               Essa propriedade especifica o número da porta que é utilizada
               para conexões IIOP. Os valores válidos são 1-65535. Em sistemas
               UNIX, criar soquetes que fazem listening nas portas 1 - 1024
               exige privilégios de superusuários.

           IIOP_SSL_LISTENER_PORT
               Essa propriedade especifica o número da porta que é utilizada
               para conexões IIOP seguras. Os valores válidos são 1-65535. Em
               sistemas UNIX, criar soquetes que fazem listening nas portas 1
               - 1024 exige privilégios de superusuários.

           IIOP_SSL_MUTUALAUTH_PORT
               Essa propriedade especifica o número da porta que é utilizada
               para conexões IIOP seguras com autenticação do cliente. Os
               valores válidos são 1-65535. Em sistemas UNIX, criar soquetes
               que fazem listening nas portas 1 - 1024 exige privilégios de
               superusuários.

           JAVA_DEBUGGER_PORT
               Esta propriedade especifica o número da porta que é usada para
               as conexões ao depurador Java Platform Debugger Architecture
               (JPDA).

               . Os valores válidos são 1-65535. Em sistemas UNIX, criar
               soquetes que fazem listening nas portas 1 - 1024 exige
               privilégios de superusuários.

           JMS_PROVIDER_PORT
               Essa propriedade especifica o número da porta para o provedor
               Java Message Service. Os valores válidos são 1-65535. Em
               sistemas UNIX, criar soquetes que fazem listening nas portas 1
               - 1024 exige privilégios de superusuários.

           JMX_SYSTEM_CONNECTOR_PORT
               Essa propriedade especifica o número da porta na qual o
               conector JMX faz listening. Os valores válidos são 1-65535. Em
               sistemas UNIX, criar soquetes que fazem listening nas portas 1
               - 1024 exige privilégios de superusuários.

           OSGI_SHELL_TELNET_PORT
               Esta propriedade especifica o número da porta que é usada para
               conexões ao Apache Felix Remote Shell . Este shell usa o
               serviço de shell Felix para interagir com o subsistema de
               gerenciamento do módulo OSGi. Os valores válidos são 1-65535.
               No UNIX, a criação de soquetes com listener nas portas 1–1024
               requer privilégios de superusuário.

       --properties
           Define as propriedades para o cluster. As propriedades a seguir
           estão disponíveis:

           GMS_DISCOVERY_URI_LIST
               Os locais das instâncias do GlassFish Server no cluster a serem
               utilizados para achar o cluster. Esta propriedade só é
               obrigatória se o GMS (Group Management Service) não estiver
               usando multicast para transferir mensagens.

               Os valores válidos dessa propriedade são os seguintes:

               ·   Uma lista separada por vírgulas de URIs (Uniform Resource
                   Identifiers). Cada URI deve localizar uma instância do
                   GlassFish Server ou o DAS. Esse formato é obrigatório se
                   várias instâncias GlassFish Server estiverem sendo
                   executadas no mesmo host.

                   O formato de cada URI na lista é o seguinte:

                   esquema://host-name-or -IP-address:porta

                   ·   esquema é o esquema de URI, que é tcp.

                   ·   host-name-or -IP-address é o nome do host ou o endereço
                       IP do host no qual a instância está sendo executada.

                   ·   porta é o número da porta no qual a instância faz
                       listening de mensagens de GMS. A propriedade do sistema
                       GMS_LISTENER_PORT-clustername deve ser definido pela
                       instância. Para obter informações sobre como definir
                       essa propriedade do sistema para uma instância,
                       consulte "Discovering a Cluster When Multicast
                       Transport Is Unavailable" no Oracle GlassFish Server
                       High Availability Administration Guide.

               ·   Uma lista de endereços IP ou de nomes de host separados por
                   vírgula em que o DAS ou as instâncias estão sendo
                   executados. A lista pode conter uma mistura de endereços IP
                   e nomes de host. Esse formato só poderá ser usado se uma
                   instância clusterizada estiver sendo executada em cada
                   host. O valor da propriedade GMS_LISTENER_PORT deve ser
                   único para cada cluster no domínio.

               ·   A palavra-chave gerar. Este formato pode ser utilizado
                   somente se uma instância de um cluster estiver sendo
                   executada em cada host e o DAS estiver sendo executado um
                   host separado. Várias instâncias no mesmo host não podem
                   ser membros do mesmo cluster. O valor da propriedade
                   GMS_LISTENER_PORT deve ser único para cada cluster no
                   domínio.

           GMS_LISTENER_PORT
               O número da porta em que o cluster faz listen das mensagens do
               GMS.

               O valor default é uma referência à propriedade do sistema
               GMS_LISTENER_PORT-cluster-name. Por default, essa propriedade
               do sistema não é definida. Nessa situação, o GMS seleciona uma
               porta livre da faixa que é definida pelas propriedades
               GMS_TCPSTARTPORT e GMS_TCPENDPORT. Por default, essa faixa é de
               9090 a 9200. Na maioria das situações, o comportamento default
               deve ser suficiente

               No entanto, se o GMS não utilizar multicast para transmitir
               mensagens, a propriedade GMS_LISTENER_PORT deverá especificar
               um número de porta que seja válido para todas as instâncias do
               GlassFish Server no cluster. Para usar o valor default para
               atender a essas exigências, use uma propriedade do sistema para
               definir o número da porta de cada instância individualmente.

               Por exemplo, utilize o subcomando create-system-properties para
               criar a propriedade do sistema GMS_LISTENER_PORT-cluster-name
               para o DAS. Assim, para cada instância no cluster, defina a
               propriedade do sistema GMS_LISTENER_PORT-cluster-name para o
               número da porta no qual a instância faz listening das mensagens
               de GMS. O valor default da propriedade GMS_LISTENER_PORT para o
               cluster faz referência a essa propriedade do sistema.

           GMS_LOOPBACK
               Especifique se uma instância pode receber de si mesma mensagens
               do nível da aplicação que a instância transmite para o cluster.

               Os valores possíveis são os seguintes:

               false
                   A instância não pode receber mensagens de si mesma
                   (default).

               true
                   A instância pode receber mensagens de si mesma. Utilize
                   esta definição para testar um instância quando tal
                   instância for a única em um cluster.

           GMS_MULTICAST_TIME_TO_LIVE
               O número máximo de iterações ou transmissões que uma mensagem
               multicast dos seguintes tipos de evento pode sofrer antes que a
               mensagem seja descartada:

               ·   Descoberta de grupo

               ·   Pulsações do membro

               ·   Alterações da associação

               Para coincidir com a configuração da rede na qual o DAS e as
               instâncias clusterizadas estão implantadas, defina este valor
               com menor valor possível. Para determinar o menor valor
               possível do seu sistema, utilize o subcomando
               validate-multicast(1).

               O valor 0 garante que as mensagens multicast nunca saiam do
               host do qual elas são transmitidas.

               O valor 1 pode evitar a transmissão de mensagens entre hosts da
               mesma sub-rede conectados por um comutador ou um roteador.

               O default é 4, o que garante que as mensagens sejam
               transmitidas com êxito para todos os membros do cluster em
               redes nas quais os hosts estão conectados por comutadores ou
               roteadores.

           GMS_TCPENDPORT
               O número de porta mais alto na faixa da qual o GMS selecionará
               uma porta livre se a propriedade do sistema
               GMS_LISTENER_PORT-cluster-name não estiver definida. O default
               é 9200.

           GMS_TCPSTARTPORT
               O número de porta mais baixo na faixa da qual o GMS selecionará
               uma porta livre se a propriedade do sistema
               GMS_LISTENER_PORT-cluster-name não estiver definida. O default
               é 9090.

       --gmsenabled
           Especifica se o GMS é ativado para o cluster.

           Os valores possíveis são os seguintes:

           true
               O GMS é ativado para o cluster (default).

               Quando o GMS é ativado para o cluster, ele é iniciado em cada
               instância do servidor no cluster e no DAS. O DAS participa em
               cada cluster para o qual esta opção é definida como true.

           false
               O GMS é desativado para o cluster.

       --multicastaddress
           Endereço no qual o GMS faz listening dos eventos do grupo. Esta
           opção deve especificar um endereço de multicast na faixa de
           224.0.0.0 a 239.255.255.255. O default é 228.9.XX.YY, em que XX e
           YY são valores independentes gerados automaticamente entre 0 e 255.

       --multicastport
           Número da porta de comunicação na qual o GMS faz listening dos
           eventos do grupo. Esta opção deve especificar um número de porta
           válido na faixa de 2048 a 49151. O default é um valor gerado
           automaticamente dentro dessa faixa.

       --bindaddress
           Endereço do protocolo de Internet (IP) da interface de rede ao qual
           o GMS se vincula. Esta opção deve especificar o endereço IP de uma
           interface de rede local. O default corresponde a todos os endereços
           públicos de interface de rede.

           Em uma máquina com vários endereços (multihome), esta opção
           configura a interface de rede usada para o GMS. A máquina com
           vários endereços (multihome) possui duas ou mais interfaces de
           rede.

           Para especificar um endereço que seja válido para todas as
           instâncias do GlassFish Server do cluster, utilize uma propriedade
           do sistema para definir o endereço de forma individual de cada
           instância.

           Por exemplo, use o subcomando create-system-properties para criar a
           propriedade do sistema GMS-BIND-INTERFACE-ADDRESS-cluster-name. Em
           seguida, defina a opção --bindaddress desse subcomando como
           ${GMS-BIND-INTERFACE-ADDRESS-cluster-name} para especificar a
           propriedade do sistema. Por fim, para cada instância no cluster,
           defina a propriedade do sistema
           GMS-BIND-INTERFACE-ADDRESS-cluster-name para o endereço da
           interface de rede obrigatório no máquina da instância.

       --hosts
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --haagentport
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --haadminpassword
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --haadminpasswordfile
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --devicesize
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --haproperty
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --autohadb
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

       --portbase
           Não especifique esta opção. Ela é retida para compatibilidade com
           outras versões. Se for especificada, não ocorre erro de sintaxe. Ao
           invés disso, o subcomando é executado com êxito e é exibida uma
           mensagem de advertência informando que a opção é ignorada.

OPERANDOS
       cluster-name
           O nome do cluster.

           O nome deve cumprir os seguintes requisitos:

           ·   O nome pode conter somente caracteres ASCII.

           ·   O nome deve começar com uma letra, um número ou um sublinhado.

           ·   O nome pode conter somente os seguintes caracteres:

               ·   Letras minúsculas

               ·   Letras maiúsculas

               ·   Números

               ·   Hífen

               ·   Período

               ·   Sublinhado

           ·   O nome deve ser único no domínio e não deve ser o nome de outro
               cluster, uma configuração nomeada, uma instância do GlassFish
               Server ou um nó.

           ·   O nome não deve ser domain, server, nem nenhuma outra
               palavra-chave que esteja reservada pelo GlassFish Server.

EXEMPLOS
       Exemplo 1, Criando um cluster
           Este exemplo cria um cluster denominado ltscluster para o qual a
           porta 1169 deve ser usada para assegurar as conexões IIOP. Como a
           opção --config não está especificada, o cluster faz referência a
           uma cópia da configuração indicada default-config denominada
           ltscluster-config.

               asadmin> create-cluster
               --systemproperties IIOP_SSL_LISTENER_PORT=1169
               ltscluster
               Command create-cluster executed successfully.

       Exemplo 2, Criando um Cluster com uma Lista de URIs para Encontrar o
       Cluster
           Este exemplo cria um cluster denominado tcpcluster. Neste exemplo,
           o GMS não está utilizando multicast para transmitir mensagem e
           várias instâncias residem no mesmo host. Portanto, a propriedade
           GMS_DISCOVERY_URI_LIST está definida para os locais das instâncias
           do GlassFish Server a serem utilizados para encontrar o cluster.
           Essas instâncias residem no host cujo endereço IP é 10.152.23.224 e
           faz listen de eventos do GMS nas portas 9090, 9091 e 9092.

           Para distinguir caracteres de dois-pontos (:) em URIs de
           separadores em uma lista de propriedades, os dois-pontos nos URIs
           recebem escape com caracteres de aspas simples (') e barras
           invertidas (\). Para obter mais informações sobre caracteres de
           escape nas opções do utilitário asadmin, consulte a página da ajuda
           asadmin(1M).

           Este exemplo pressupõe que a porta em que cada instância faz listen
           de mensagens do GMS é definida de maneira independente para a
           instância por meio da propriedade do sistema
           GMS_LISTENER_PORT-tcpcluster. Para obter informações sobre como
           definir a porta em que uma instância faz listen das mensagens do
           GMS, consulte "Discovering a Cluster When Multicast Transport Is
           Unavailable" no Oracle GlassFish Server High Availability
           Administration Guide.

               asadmin> create-cluster --properties GMS_DISCOVERY_URI_LIST=
               tcp'\\:'//10.152.23.224'\\:'9090,
               tcp'\\:'//10.152.23.224'\\:'9091,
               tcp'\\:'//10.152.23.224'\\:'9092 tcpcluster
               Command create-cluster executed successfully.

       Exemplo 3, Criando um Cluster com uma Lista de Endereços IP para
       Encontrar o Cluster
           Este exemplo cria um cluster chamado ipcluster. Neste exemplo, o
           GMS não está utilizando multicast para transmitir mensagens e só
           uma instância clusterizada reside em cada host. Portanto, a
           propriedade GMS_DISCOVERY_URI_LIST está definida para os endereços
           IP dos hosts em que as instâncias serão utilizadas para encontrar o
           cluster que está sendo executado. O cluster faz listen de mensagens
           do GMS na porta 9090.

               asadmin> create-cluster --properties 'GMS_DISCOVERY_URI_LIST=
               10.152.23.225,10.152.23.226,10.152.23.227,10.152.23.228:
               GMS_LISTENER_PORT=9090' ipcluster
               Command create-cluster executed successfully.

       Exemplo 4, Criando um Cluster com uma Lista de Instâncias Geradas para
       Encontrar o Cluster
           Este exemplo cria um cluster com o nome gencluster. Neste exemplo,
           o GMS não está utilizando multicast para transmitir mensagens, uma
           instância do cluster está sendo executada em cada host e o DAS está
           sendo executado em um host separado. Portanto, a propriedade
           GMS_DISCOVERY_URI_LIST está definida para a palavra-chave generate
           para gerar uma lista de instâncias a serem utilizadas para
           encontrar o cluster. O cluster faz listen de mensagens do GMS na
           porta 9090.

               asadmin> create-cluster --properties 'GMS_DISCOVERY_URI_LIST=generate:
               GMS_LISTENER_PORT=9090' gencluster
               Command create-cluster executed successfully.

STATUS DE SAíDA
       0
           comando executado com sucesso

       1
           erro ao executar o comando

CONSULTE TAMBéM
       create-application-ref(1), create-instance(1), create-jdbc-resource(1),
       create-local-instance(1), create-resource-ref(1), delete-cluster(1),
       delete-instance(1), delete-local-instance(1), implantar(1),
       list-clusters(1), start-cluster(1), stop-cluster(1),
       validate-multicast(1)

       asadmin(1M)

       "Discovering a Cluster When Multicast Transport Is Unavailable" no
       Oracle GlassFish Server High Availability Administration Guide

       Apache Felix Remote Shell
       (http://felix.apache.org/site/apache-felix-remote-shell.html), Java
       Platform Debugger Architecture (JPDA)
       (http://java.sun.com/javase/technologies/core/toolsapis/jpda/)

                               4 de janeiro 2012             CREATE-CLUSTER(1)
