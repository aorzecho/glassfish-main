<?xml version="1.0" encoding="iso-8859-1"?>

<project name="Apache BCEL Library source integration" default="build" basedir=".">

    <!-- import build.xml for init target and inherited properties -->
    <import file="build.xml"/>
    <import file="build-taskdefs.xml"/>

    <target name="build" depends="init">
        <antcall target="bcel.publish.local" />
    </target>

    <!--
        Checkout Apache BCEL source, build and publish in local maven repo
    -->
    <target name="bcel.checkout" >
        <echo message="checkout bcel from ${bcel.svn.url}."/>
        <exec executable="svn" dir="${external.dir}" failonerror="true" >
	    <arg line="checkout" />
            <arg line="${bcel.svn.url}" />
            <arg line="bcel" />
	</exec>
    </target>

    <target name="bcel.build" depends="bcel.checkout">
        <!-- build Apache BCEL -->
        <exec executable="maven" dir="${external.dir}/bcel" failonerror="true" />
   </target>

   <target name="bcel.publish.local" depends="bcel.build" >
        <mvn.publish.local 
	    jar="${external.dir}/bcel/target/bcel-${bcel.version}.jar" 
            mvngroup="org.apache.bcel" 
            mvnartid="bcel" 
            mvnversion="${bcel.version}"/>
    </target>

   <target name="bcel.publish.remote" depends="bcel.build" >
        <mvn.publish.remote
            jar="${external.dir}/bcel/target/bcel-${bcel.version}.jar"
            mvngroup="org.apache.bcel"
            mvnartid="bcel"
            mvnversion="${bcel.version}"/>
    </target>


</project>
