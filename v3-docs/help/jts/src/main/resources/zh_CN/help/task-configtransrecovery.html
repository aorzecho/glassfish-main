<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009, 2010 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-configtransrecovery"></a><h4>配置 GlassFish Server 恢复事务的方法</h4><a name="indexterm-2"></a><p>如果服务器崩溃或资源管理器崩溃，都可能会导致事务未完成。完成这些被搁置的事务并将其从故障中恢复至关重要。GlassFish Server 旨在在服务器启动时从故障中恢复并完成这些事务。</p>

<p>执行恢复操作时，如果无法访问某些资源，则服务器重新启动操作可能会延迟，因为服务器将尝试恢复事务。</p>

<p>如果事务跨服务器进行，启动该事务的服务器会联系其他服务器以获得事务的结果。如果无法访问其他服务器，则该事务将使用&#8220;试探性决定&#8221;字段来确定结果。</p>

<ol>
<li><b>在导航树中，展开&#8220;配置&#8221;节点。</b></li>
<li><b>选择要配置的实例：</b><ul>
<li><b>要配置特定的实例，请选择该实例的配置节点。例如，对于默认实例 <tt>server</tt>，请选择 <tt>server-config</tt> 节点。</b></li>
<li><b>要配置所有实例的默认设置，请选择 <tt>default-config</tt> 节点。</b></li></ul></li>
<li><b>选择&#8220;事务服务&#8221;节点。</b><p>此时将打开&#8220;事务服务&#8221;页面。</p></li>
<li><b>在&#8220;事务服务&#8221;页面上，选中&#8220;启用重新启动时&#8221;复选框，以恢复未完成的事务。</b><p>默认情况下，&#8220;已启用&#8221;复选框未选中。</p></li>
<li><b>在&#8220;重试超时&#8221;字段中，键入 GlassFish Server 尝试连接到不可访问服务器的秒数。</b><p>默认值为 600（10 分钟）。</p></li>
<li><b>从&#8220;启发式决策&#8221;下拉式列表中，为事务中不可访问的服务器选择策略。</b><p>除非有充分理由需要选择&#8220;提交&#8221;，否则请将&#8220;启发式决策&#8221;设置保留为&#8220;回滚&#8221;（默认值）。提交不确定的事务会破坏应用程序的数据完整性。</p></li>
<li><b>单击&#8220;保存&#8221;。</b></li>
<li><b>重新启动 GlassFish Server。</b></li></ol><h6>另请参见</h6>
<ul><li><p><a href="task-configtransservice.html">配置事务服务</a></p>

</li>
<li><p><a href="task-settranstimeout.html">设置事务超时值</a></p>

</li>
<li><p><a href="task-settranslog.html">设置事务日志的位置</a></p>

</li>
<li><p><a href="task-setkeyptinterval.html">设置关键点间隔</a></p>

</li></ul>


<small>版权所有 &#169; 2010, Oracle 和/或其附属公司。 保留所有权利。 <a href="docinfo.html">法律声明</a></small>
