<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2005, 2011 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-webcontaineravailability"></a><h3>配置 Web 容器的可用性设置</h3><a name="indexterm-12"></a><a name="indexterm-13"></a><a name="indexterm-14"></a><a name="indexterm-15"></a><ol>
<li><b>在导航树中，展开&#8220;配置&#8221;节点。</b></li>
<li><b>选择您要更改的配置。</b></li>
<li><b>在配置的节点下，选择&#8220;可用性服务&#8221;节点。</b><p>此时将打开&#8220;可用性服务&#8221;页面。</p></li>
<li><b>在&#8220;可用性服务&#8221;页面上，单击&#8220;Web 容器可用性&#8221;选项卡。</b><p>此时将打开&#8220;Web 容器可用性&#8221;页面。</p></li>
<li><b>在&#8220;可用性服务&#8221;字段中，选中&#8220;已启用&#8221;框以启用 Web 容器的可用性。</b><p>要禁用可用性，请清除&#8220;可用性服务&#8221;的&#8220;已启用&#8221;框中的复选标记。</p></li>
<li><b>从&#8220;持久性类型&#8221;下拉式列表中，选择持久性机制。</b><ul>
<li><b>如果<b>未</b>选中&#8220;已启用可用性服务&#8221;，请选择以下选项之一：</b>
<ul><li><p><tt>memory</tt>，不提供任何会话持久性</p>

</li>
<li><p><tt>file</tt>，提供基于非高可用性文件系统的会话持久性</p>

</li></ul>
</li>
<li><b>如果选中&#8220;已启用可用性服务&#8221;，请选择 <tt>replicated</tt> 以提供基于高可用性群集故障转移的会话持久性。</b></li></ul></li>
<li><b>从&#8220;持久性频率&#8221;下拉式列表中，选择存储 HTTP 会话的频率：</b>
<ul><li><p><tt>web-method</tt>&#8212;将响应发送回客户机之前，在每个 Web 请求结束时存储会话状态。此模式为发生故障时完全更新会话状态提供了最好的保证。这是默认选项。</p>

</li></ul>
<p>仅当&#8220;持久性类型&#8221;为 <tt>replicated</tt> 时，&#8220;持久性频率&#8221;才适用。</p></li>
<li><b>从&#8220;持久性范围&#8221;下拉式列表中，选择发生存储时所需的 HTTP 会话更改的范围。</b>
<ul><li><p><tt>session</tt>&#8212;每次都存储整个会话状态。此模式为正确存储任何可分发 Web 应用程序的会话数据提供了最好的保证。</p>

</li>
<li><p><tt>modified-session</tt>&#8212;如果会话状态已修改，则存储整个会话状态。如果调用了 <tt>HttpSession.setAttribute()</tt> 或 <tt>HttpSession.removeAttribute()</tt>，则系统将认为会话已被修改。您必须保证每次更改属性时都调用 <tt>setAttribute()</tt>。这不是 Java EE 规范的要求，但是此模式需要这样做才能正常工作。</p>

</li>
<li><p><tt>modified-attribute</tt>&#8212;仅存储修改后的会话属性。要使此模式正常工作，您必须遵循以下指导原则：</p>


<ul><li><p>每次修改会话状态时都调用 <tt>setAttribute()</tt>。</p>

</li>
<li><p>确保各属性之间没有交叉引用。系统将对每个不同的属性关键字的对象图形单独进行序列化并单独存储。如果每个单独的关键字下的对象之间有对象交叉引用，则它们将不会被正确序列化和反序列化。</p>

</li>
<li><p>在多个属性之间分布会话状态，或者至少在只读属性和可修改属性之间分布会话状态。</p>

</li></ul>
</li></ul>
<p>仅当&#8220;持久性类型&#8221;为 <tt>replicated</tt> 时，&#8220;持久性范围&#8221;才适用。</p></li>
<li><b>在&#8220;单点登录状态&#8221;字段中，选中&#8220;已启用&#8221;框，使单点登录状态可用于故障转移。</b><p>要使单点登录状态对故障转移不可用，请取消选中&#8220;已启用单点登录状态&#8221;复选框。</p></li>
<li><b>要还原所有设置的默认值，请单击&#8220;装入默认值&#8221;按钮。</b></li>
<li>（可选的）<b>在&#8220;其他属性&#8221;部分中，指定其他属性。</b><p>GlassFish Server 不定义任何其他 Web 容器可用性属性。</p><ul>
<li><b>要添加属性，请单击&#8220;添加属性&#8221;按钮。在显示的空白行中，在&#8220;名称&#8221;字段中键入属性名称，在&#8220;值&#8221;字段中键入属性值。</b></li>
<li><b>要修改属性，请编辑该属性的&#8220;值&#8221;字段。</b></li>
<li><b>要删除属性，请选中位于您要删除属性的&#8220;名称&#8221;字段左边的复选框，然后单击&#8220;删除属性&#8221;按钮。</b></li></ul></li>
<li><b>单击&#8220;保存&#8221;。</b></li></ol><p></b>另请参见</b></p>
<ul><li><p><a href="task-webcontainergeneral.html">配置 Web 容器的常规属性</a></p>

</li>
<li><p><a href="task-webcontainersessiontimeout.html">配置 Web 容器的会话属性</a></p>

</li>
<li><p><a href="task-webcontainermanagerprops.html">配置 Web 容器的管理器属性</a></p>

</li>
<li><p><a href="task-webcontainerstoreprops.html">配置 Web 容器的存储属性</a></p>

</li></ul>


<small>版权所有 &#169; 2005, 2011, Oracle 和/或其附属公司。 保留所有权利。 <a href="docinfo.html">法律声明</a></small>
