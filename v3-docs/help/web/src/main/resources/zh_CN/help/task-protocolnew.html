<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2005, 2011 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-protocolnew"></a><h3>创建协议</h3><a name="indexterm-24"></a><ol>
<li><b>在导航树中，展开&#8220;配置&#8221;节点。</b></li>
<li><b>在&#8220;配置&#8221;节点下，展开&#8220;网络配置&#8221;节点。</b></li>
<li><b>在&#8220;网络配置&#8221;节点下，选择&#8220;协议&#8221;节点。</b><p>此时将打开&#8220;协议&#8221;页面。</p></li>
<li><b>在&#8220;协议&#8221;页面上，单击&#8220;新建&#8221;。</b><p>此时将打开&#8220;新建协议&#8221;页面。</p></li>
<li><b>在&#8220;名称&#8221;字段中，键入协议的唯一名称。</b></li>
<li><b>选择&#8220;启用安全性&#8221;复选框以为协议启用安全性。</b><p>默认情况下禁用此选项。如果启用安全性，则可以使用&#8220;编辑协议&#8221;页面的 "SSL" 选项卡来修改安全性设置。</p></li>
<li><b>选择&#8220;启用状态&#8221;复选框以启用文件高速缓存。</b><p>默认情况下启用此选项。</p></li>
<li><b>在&#8220;最长生存期&#8221;字段中，键入有效高速缓存条目的最长生存期（以秒为单位）。</b><p>该参数用于控制文件经过高速缓存之后，使用高速缓存信息的时间。时间长于最长生存期的条目将用同一文件的新条目替代。如果您的内容很少发生更改，请增大该值以改善性能。</p><p>最优的最长生存期取决于现有文件是否被频繁修改。例如，如果以固定的时间间隔一天修改文件四次，则可以考虑将最长生存期设置为 21600 秒（6 小时）。否则，可以考虑将最长生存期设置为您希望在上一版本的文件修改后，处理该文件的最长时间。</p><p>默认值为 30。</p></li>
<li><b>在&#8220;最大高速缓存大小&#8221;字段中，键入磁盘上文件高速缓存的最大总大小（以字节为单位）。</b><p>默认值为 10485760。</p></li>
<li><b>在&#8220;最大文件计数&#8221;字段中，键入文件高速缓存中可以存储的文件的最大数量。</b><p>如果该值过大，服务器将高速缓存较少使用的文件，这样会浪费内存。如果该值过小，将无法体现高速缓存的优点。尝试为该属性设置不同的值，以寻找适合特定应用程序的最佳解决方案。</p><p>默认值为 1024。</p></li>
<li><b>在&#8220;服务器名称&#8221;字段中，键入要在服务器发送给客户机的 URL 中使用的主机名。</b><p>如果服务器使用别名，则此名称为别名。如果服务器未使用别名，请将此字段保留为空。</p><p>此值会影响服务器自动生成的 URL，但不会影响存储在服务器中的目录和文件的 URL。如果服务器使用别名，则服务器名称应为别名。如果附加了冒号和端口号，则在服务器发送给客户机的 URL 中将使用该端口。</p></li>
<li><b>从&#8220;默认虚拟服务器&#8221;下拉式列表中，选择要与此协议关联的虚拟服务器。</b><p>使用&#8220;虚拟服务器&#8221;页面可以定义虚拟服务器。</p></li>
<li><b>在&#8220;重定向端口&#8221;字段中，键入要用于将请求重定向至另一端口的端口值。 </b><p>如果满足以下两个条件，GlassFish Server 将自动重定向请求：</p>


<ul><li><p>引用此协议的网络侦听器支持非 SSL 请求。</p>

</li>
<li><p>接收匹配安全性约束需要 SSL 传输的请求。</p>

</li></ul>
<p>如果未指定重定向端口，则 GlassFish Server 会使用原始请求中指定的端口号。默认情况下，未指定任何端口。</p></li>
<li><b>在&#8220;最大连接数&#8221;字段中，键入在服务器关闭连接之前可以连续处理的最大请求数。</b><p>保持活动子系统会定期轮询空闲连接。默认值为 256。</p><p>将此属性设置为 1，将禁用 HTTP/1.0 的保持活动功能和 HTTP/1.1 的保持活动以及连续处理功能。如果值为 0，则表示始终拒绝请求。如果值为 -1，则不限制保持活动连接的数量。</p></li>
<li><b>在&#8220;超时&#8221;字段中，键入可以认为连接处于空闲状态并维持在保持活动状态的最长时间（以秒为单位）。</b><p>如果值为 0 或小于 0，则表示保持活动连接将无限期地保持打开状态。默认值为 30 秒。</p></li>
<li><b>选中&#8220;启用上载超时&#8221;复选框，可以在到达&#8220;连接上载超时&#8221;限制之后，关闭缓慢读取字节的 Servlet 连接。</b><p>如果禁用此选项，则 Servlet 连接将不会超时。默认情况下禁用此选项。</p></li>
<li><b>在&#8220;连接上载超时&#8221;字段中，键入上载的超时，以毫秒为单位。 </b><p>只有在选中&#8220;启用上载超时&#8221;复选框时，此字段才可用。默认值为 300000 毫秒。</p></li>
<li><b>在&#8220;请求超时&#8221;字段中，键入请求超时之前经过的秒数。</b><p>如果在到达超时值之前未处理请求，则请求将被忽略。默认值为 30 秒。</p></li>
<li><b>在&#8220;发送缓冲区大小&#8221;字段中，键入发送缓冲区的大小（以字节为单位）。</b><p>默认值为 8192 字节。</p></li>
<li><b>在&#8220;标头缓冲区长度&#8221;字段中，键入请求处理线程用于读取请求数据的缓冲区的大小（以字节为单位）。</b><p>默认值为 8192 字节。</p></li>
<li><b>在&#8220;最大 POST 大小&#8221;字段中，键入 POST 操作的最大大小（以字节为单位）。</b><p>默认值为 2097152 字节。</p></li>
<li><b>在&#8220;URI 编码&#8221;字段中，键入用于对接收的请求 URI 进行解码的字符集的名称。</b><p>该值必须是有效的 IANA 字符集名称。默认值为 UTF-8。</p></li>
<li><b>在&#8220;版本&#8221;字段中，键入使用的 HTTP 协议的版本。</b><p>默认值为 HTTP/1.1。</p></li>
<li><b>从&#8220;压缩&#8221;下拉式列表中，选择使用 HTTP/1.1 GZIP 压缩来节约服务器带宽。</b><p>可用选项为：</p><dl><dt><tt>on</tt></dt>
<dd><p>压缩数据。</p>

</dd>
<dt><tt>off</tt></dt>
<dd><p>禁用压缩。</p>

</dd>
<dt><tt>force</tt></dt>
<dd><p>在所有情况下强制执行数据压缩。</p>

</dd>
</dl>
<p>默认值为 <tt>off</tt>。</p></li>
<li><b>在&#8220;可压缩 Mime 类型&#8221;字段中，键入使用 HTTP 压缩的 MIME 类型的逗号分隔列表。</b><p>默认值为 <tt>text/html,text/xml,text/plain</tt>。</p></li>
<li><b>在&#8220;最小压缩大小&#8221;字段中，键入应用压缩时，文件的最小大小。</b><p>如果&#8220;压缩&#8221;设置为 <tt>on</tt> 或 <tt>force</tt>，则必须设置此值。默认值为 2048 字节。</p></li>
<li><b>在&#8220;无压缩用户代理&#8221;字段中，键入匹配不应使用压缩的 HTTP 客户机的用户代理的正则表达式列表，以逗号分隔。</b><p>默认情况下，此值为空字符串。</p></li>
<li><b>在&#8220;受限用户代理&#8221;字段中，键入应用了 HTTP 压缩的受限用户代理的列表。</b><p>如果未指定用户代理，则 HTTP 压缩将应用到所有用户代理。默认情况下，未指定用户代理。</p></li>
<li><b>在&#8220;默认响应类型&#8221;字段中，键入指定默认响应类型的字符串。</b><p>此格式是以分号分隔的字符串，由内容类型、编码、语言和字符集组成。默认值为 <tt>text/html; charset=iso-8859-1</tt>。</p></li>
<li><b>在&#8220;强制响应类型&#8221;字段中，键入一个字符串，该字符串指定在没有与文件扩展名匹配的 MIME 映射时使用的请求类型。</b><p>此格式是以分号分隔的字符串，由内容类型、编码、语言和字符集组成。默认值为 <tt>text/html; charset=iso-8859-1</tt>。</p></li>
<li><b>在&#8220;适配器&#8221;字段中，键入静态资源适配器的类名。</b><p>默认值为 <tt>com.sun.grizzly.tcp.StaticResourcesAdapter</tt>。</p></li>
<li><b>选中&#8220;启用 Comet 支持&#8221;复选框，为引用此协议的网络侦听器启用 Comet 支持。</b><p>默认情况下禁用此选项。如果 Servlet 或 JSP 页面使用 Comet 技术，请将 <tt>load-on-startup</tt> 元素添加到 <tt>web.xml</tt> 文件中，以确保该页面在 GlassFish
Server 启动时进行初始化。例如：</p><pre>&#60;servlet>
&#60;servlet-name>CheckIn&#60;/servlet-name>
&#60;servlet-class>CheckInServlet&#60;/servlet-class>
&#60;load-on-startup>0&#60;/load-on-startup>
&#60;/servlet></pre></li>
<li><b>选中&#8220;启用 DNS 查找&#8221;复选框以启用 DNS 查找。</b><p>默认情况下禁用此选项。</p></li>
<li><b>选中&#8220;启用 RCM 支持&#8221;复选框以启用资源配置管理 (RCM)。</b><p>默认情况下禁用此选项。</p></li>
<li><b>选中&#8220;启用跟踪&#8221;复选框以启用跟踪操作。</b><p>如果禁用此选项，则 GlassFish Server 将不易受到跨站点脚本攻击。默认情况下启用此选项。</p></li>
<li><b>选中&#8220;启用验证传递&#8221;复选框，以指示使用此协议的网络侦听器接收来自 SSL 终端代理服务器的流量。</b><p>默认情况下禁用此选项。</p></li>
<li><b>选中&#8220;启用分块&#8221;复选框以启用 HTTP 响应分块。</b><p>默认情况下启用此选项。</p></li>
<li><b>选中&#8220;启用 XPowered By&#8221;复选框，以指示 GlassFish Server 根据 Java Servlet 3.0 和 Java Server
Pages 2.0 规范使用 <tt>X-Powered-By</tt> 标头。</b><p>默认情况下启用此选项。</p></li></ol><p></b>接下来的操作</b></p><p>创建协议后，您可以创建使用该协议的网络侦听器。</p>

<p></b>另请参见</b></p>
<ul><li><p><a href="task-networklistenernew.html">创建网络侦听器</a></p>

</li>
<li><p><a href="task-networklisteneredit.html">编辑网络侦听器</a></p>

</li>
<li><p><a href="task-networklistenerdelete.html">删除网络侦听器</a></p>

</li>
<li><p><a href="task-protocoledit.html">编辑协议</a></p>

</li>
<li><p><a href="task-protocolssledit.html">编辑协议的 SSL 设置</a></p>

</li>
<li><p><a href="task-protocolhttpedit.html">编辑协议的 HTTP 设置</a></p>

</li>
<li><p><a href="task-protocolfilecacheedit.html">编辑协议的文件高速缓存设置</a></p>

</li>
<li><p><a href="task-protocoldelete.html">删除协议</a></p>

</li>
<li><p><a href="task-transportnew.html">创建传输</a></p>

</li>
<li><p><a href="task-transportedit.html">编辑传输</a></p>

</li>
<li><p><a href="task-transportdelete.html">删除传输</a></p>

</li></ul>


<small>版权所有 &#169; 2005, 2011, Oracle 和/或其附属公司。 保留所有权利。 <a href="docinfo.html">法律声明</a></small>
