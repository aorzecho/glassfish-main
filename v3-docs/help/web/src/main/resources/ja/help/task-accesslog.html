<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009, 2010 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-accesslog"></a><h4>HTTP サービスを設定する</h4><a name="indexterm-16"></a><a name="indexterm-17"></a><ol>
<li><b>ナビゲーションツリーで、「設定」ノードを展開します。</b></li>
<li><b>「設定」ノードの下で、「HTTP サービス」ノードを選択します。</b><p>「HTTP サービス」ページが開きます。</p></li>
<li><b>「SSO」の「有効」チェックボックスを選択して、このサーバーのすべての仮想サーバー上で、同じレルムで設定されたすべての Web アプリケーションに対して、デフォルトでシングルサインオンを有効にします。</b><p>この設定は各仮想サーバーで上書きできます。このオプションは、デフォルトでは無効になっています。</p></li>
<li><b>「アクセスログ」の「有効」チェックボックスを選択して、このプロパティーを指定していないすべての仮想サーバーのサブ要素に対するアクセスログを有効にします。 </b><p>「アクセスログ」の「有効」チェックボックスの選択を解除すると、このプロパティーを指定していないすべての仮想サーバーのサブ要素に対するアクセスログは無効になります。このオプションは、デフォルトでは無効になっています。</p></li>
<li><b>「ローテーション」の「有効」チェックボックスを選択して、ログファイルのローテーションを有効にします。</b><p>このオプションはデフォルトで有効になっています。</p></li>
<li><b>「ローテーションポリシー」ドロップダウンリストから、ローテーションポリシーを選択します。</b><p>使用可能なローテーションポリシーは <tt>time</tt> のみです。</p></li>
<li><b>「ローテーション間隔」フィールドに、アクセスログのローテーション間隔を分単位で入力します。 </b><p>このフィールドは、「ローテーションポリシー」が「<tt>time</tt>」の場合にのみ有効です。デフォルト値は 1,440 分 (24 時間) です。</p></li>
<li><b>「ローテーションサフィックス」フィールドに、ローテーション後にログファイル名の最後に追加される文字列値を入力します。</b><p>デフォルト値は <tt>yyyy-MM-dd</tt> です。</p><p>ログローテーションごとに一意のサフィックスを作成するために必要な値がローテーションサフィックスに含まれていることを確認してください。たとえば、アクセスログを毎日複数回の頻度でローテーションする場合には、ローテーションサフィックスに時刻を含めます。</p><p>ローテーション間隔が経過するたびにアクセスログファイルがローテーションされるようにするには、一意のサフィックスが必要です。新しいアクセスログファイルのローテーションサフィックスが既存のアクセスログファイルのローテーションサフィックスと同じ場合、ファイルはローテーションされません。</p></li>
<li><b>「最大ファイル数」フィールドに、ローテーションで維持するアクセスログファイルの最大数を入力します。</b><p>負の値を指定すると、ファイル数は制限されません。デフォルト値は &#8211;1 です。</p></li>
<li><b>「バッファーサイズ」フィールドに、アクセスログバッファーのサイズをバイト単位で入力します。</b><p>0 以下の値を指定すると、アクセスログのバッファーリングが無効になります。デフォルト値は 32768 です。</p></li>
<li><b>「書き込み間隔」フィールドに、ログをディスクに書き込むまでの時間を秒単位で入力します。</b><p>アクセスログは、バッファーがいっぱいになるか、指定した時間が経過すると書き込まれます。0 以下の値を指定すると、バッファーがいっぱいでなくても常に書き込まれます。つまり、サーバーアクセスがあるたびに、ログメッセージはファイルに直接格納されます。デフォルト値は 300 です。</p></li>
<li><b>「形式」フィールドに、文字列値を入力して次のアクセスログのプロパティーを指定します。</b>
<ul><li><p>アクセスログに取り込まれる情報</p>

</li>
<li><p>情報が取り込まれる順序</p>

</li></ul>
<p>デフォルト値は次のとおりです。</p><pre>%client.name% %auth-user-name% %datetime% %request% %status% %response.length%</pre><p>形式文字列に含めることができる値は次のとおりです。</p><dl><dt><tt>%attribute.<i>name</i>%</tt></dt>
<dd><p>指定した <i>name</i> を持つ要求属性の値を (<tt>toString</tt> メソッドを呼び出して) ログに記録します。</p>

</dd>
<dt><tt>%auth-user-name%</tt></dt>
<dd><p>承認ユーザーの名前</p>

</dd>
<dt><tt>%client.name%</tt></dt>
<dd><p>クライアントホスト名</p>

</dd>
<dt><tt>%client.dns%</tt></dt>
<dd><p>クライアント DNS</p>

</dd>
<dt><tt>%cookie.<i>name</i>%</tt></dt>
<dd><p>指定した <i>name</i> を持つ要求のクッキーの値</p>

</dd>
<dt><tt>%cookie.value%</tt></dt>
<dd><p>要求にある最初のクッキーの値</p>

</dd>
<dt><tt>%datetime%</tt></dt>
<dd><p>システム日付</p>

</dd>
<dt><tt>%request%</tt></dt>
<dd><p>完全な HTTP 要求</p>

</dd>
<dt><tt>%status%</tt></dt>
<dd><p>状態</p>

</dd>
<dt><tt>%response.length%</tt></dt>
<dd><p>応答コンテンツ長</p>

</dd>
<dt><tt>%header.referer%</tt></dt>
<dd><p>Referer ヘッダー</p>

</dd>
<dt><tt>%header.user-agent%</tt></dt>
<dd><p>ユーザーエージェントヘッダー</p>

</dd>
<dt><tt>%http-method%</tt></dt>
<dd><p>HTTP メソッド</p>

</dd>
<dt><tt>%http-uri%</tt></dt>
<dd><p>HTTP URI</p>

</dd>
<dt><tt>%query-str%</tt></dt>
<dd><p>HTTP クエリー文字列</p>

</dd>
<dt><tt>%http-version%</tt></dt>
<dd><p>HTTP プロトコルバージョン</p>

</dd>
<dt><tt>%header.accept%</tt></dt>
<dd><p>受け入れヘッダー</p>

</dd>
<dt><tt>%header.date%</tt></dt>
<dd><p>日付ヘッダー</p>

</dd>
<dt><tt>%header.if-mod-since%</tt></dt>
<dd><p>If-Modified-Since ヘッダー</p>

</dd>
<dt><tt>%header.auth%</tt></dt>
<dd><p>認証ヘッダー</p>

</dd>
<dt><tt>%header.<i>any</i>%</tt></dt>
<dd><p>RFC 2616 で定義された任意の有効な HTTP ヘッダー値 (<tt>any</tt> も有効なヘッダー値。ここでは変数として指定される)</p>

</dd>
<dt><tt>%session.<i>name</i>%</tt></dt>
<dd><p><i>name</i> という名前を持つセッション属性の値。指定した属性がセッションに存在しない場合は <tt>NULL-SESSION-ATTRIBUTE-<i>name</i></tt>、セッションが存在しない場合は <tt>NULL-SESSION</tt> になります。</p>

</dd>
<dt><tt>%time-taken%</tt></dt>
<dd><p>各要求の処理にかかった時間 (ミリ秒単位)</p>

</dd>
<dt><tt>%vs.id%</tt></dt>
<dd><p>仮想サーバー ID</p>

</dd>
</dl>
</li>
<li>(省略可能) <b>「追加プロパティー」セクションで、追加プロパティーを指定します。</b><p>利用可能なプロパティーの説明は、<a href="ref-httpserviceprops.html">「HTTP サービスに固有のプロパティー」</a>を参照してください。</p><ul>
<li><b>プロパティーを追加するには、「プロパティーを追加」ボタンをクリックします。表示される空白行で、「名前」フィールドにプロパティー名を入力し、「値」フィールドにプロパティー値を入力します。</b></li>
<li><b>プロパティーを変更するには、そのプロパティーの「値」フィールドを編集します。</b></li>
<li><b>プロパティーを削除するには、削除するプロパティーの「名前」フィールドの左側にあるチェックボックスを選択し、「プロパティを削除」ボタンをクリックします。</b></li></ul></li>
<li><b>「保存」をクリックします。</b>
<hr><p><b>ヒント - </b>デフォルト設定に戻すには、「デフォルトを読込み」ボタンをクリックし、「保存」を保存します。</p>


<hr>
</li></ol>

<small>Copyright &#169; 2010, Oracle and/or its affiliates. All rights reserved. <a href="docinfo.html">著作権について</a></small>
