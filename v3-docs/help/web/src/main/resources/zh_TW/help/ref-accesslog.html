<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009, 2010 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->
<a name="ref-accesslog"></a><h4>HTTP 服務</h4>
<a name="indexterm-55"></a><a name="indexterm-56"></a><p>使用 [HTTP 服務] 頁面可指定 Web 應用程式的一般存取記錄策略。</p>

<p>HTTP 服務的功能可部署 Web 應用程式，以及能透過 HTTP 用戶端存取已部署的 Web 應用程式，還有虛擬伺服器、執行緒池及網路配置功能。</p>

<p>GlassFish Server 使用「HTTP 服務存取記錄」，以啟用並配置虛擬伺服器存取記錄的自動重建。這些記錄位於 <tt><i>domain-dir</i>/logs/access</tt> 目錄中，其命名方式如下：<tt><i>virtual_server_name</i>_access_log.<i>yyyyMMdd</i>-<i>HH</i>h<i>mm</i>m<i>ss</i>s.txt</tt></p>

<p>[HTTP 服務] 頁面包含下列選項。</p>

<dl><dt>載入預設值</dt>
<dd><p>將所有設定復原為預設值的按鈕。</p>

</dd>
<dt>配置名稱</dt>
<dd><p>套用此頁面上之設定的配置名稱。此欄位是唯讀欄位。</p>

</dd>
<dt>SSO</dt>
<dd><p>識別是否為此伺服器上所有針對相同範圍配置的虛擬伺服器上的所有 Web 應用程式預設啟用了單次登入。若沒有啟用此選項，則會針對所有虛擬伺服器預設停用單次登入，且使用者必須在使用每部虛擬伺服器上的每個應用程式時進行分別認證。您可以針對個別的虛擬伺服器置換此設定。可以啟用或停用 SSO。此選項預設為停用。</p>

</dd>
<dt>存取記錄</dt>
<dd><p>若選取此選項，則會對所有未指定此特性的虛擬伺服器子元素啟用存取記錄。如果未選取，則會針對尚未指定此特性的所有虛擬伺服器子元素，停用存取記錄功能。此選項預設為停用。</p>

</dd>
<dt>自動重建</dt>
<dd><p>若選取此選項，則會啟用自動重建記錄檔。此選項預設為啟用。</p>

</dd>
<dt>自動重建策略</dt>
<dd><p>唯一可用的自動重建策略是 <tt>time</tt>。</p>

</dd>
<dt>自動重建間隔</dt>
<dd><p>每兩次自動重建存取記錄的相隔分鐘數。僅當自動重建策略為 <tt>time</tt> 時，此欄位才有效。預設值為 1,440 分鐘 (24 小時)。</p>

</dd>
<dt>自動重建後綴</dt>
<dd><p>自動重建之後，要增加至記錄檔名稱結尾的字串值。預設值為 <tt>yyyy-MM-dd</tt>。</p>

<p>請確保自動重建後綴包含足夠的值，以為每個記錄自動重建建立唯一的後綴。例如，如果存取記錄的自動重建間隔比每天一次更頻繁，請將每日時間納入自動重建後綴。</p>

<p>若要確保在每次經過自動重建間隔時間後，即自動重建存取記錄檔，則需要有唯一的後綴。如果新的存取記錄檔之自動重建後綴與現有存取記錄檔的自動重建後綴相同，則不會自動重建檔案。</p>

</dd>
<dt>最大檔案計數</dt>
<dd><p>要保留的自動重建存取記錄檔案最大數目。負值代表檔案數沒有限制。預設值為 &#8211;1。</p>

</dd>
<dt>緩衝區大小</dt>
<dd><p>存取記錄緩衝區的大小 (以位元組為單位)，或未緩衝存取記錄小於或等於 0 的值。預設值為 32768。</p>

</dd>
<dt>寫入間隔</dt>
<dd><p>將記錄寫入磁碟之前經過的秒數。當緩衝區已滿或間隔過期時，存取記錄會被寫入。如果值小於或等於 0，則即使緩衝區未滿，也會一直執行寫入。這意味著每次存取伺服器時，會將記錄訊息直接儲存至檔案中。預設值為 300。</p>

</dd>
<dt>格式</dt>
<dd><p>指定要在存取記錄中擷取的資訊及擷取的順序之字串值。預設值如下：</p>

<pre>%client.name% %auth-user-name% %datetime% %request% %status% %response.length%</pre><p>格式字串中包含下列可用值：</p>

<dl><dt><tt>%attribute.<i>name</i>%</tt></dt>
<dd><p>記錄具有指定 <i>name</i> 的請求屬性的值 (透過呼叫其 <tt>toString</tt> 方法) </p>

</dd>
<dt><tt>%auth-user-name%</tt></dt>
<dd><p>授權使用者的名稱</p>

</dd>
<dt><tt>%client.name%</tt></dt>
<dd><p>用戶端主機名稱</p>

</dd>
<dt><tt>%client.dns%</tt></dt>
<dd><p>用戶端 DNS</p>

</dd>
<dt><tt>%cookie.<i>name</i>%</tt></dt>
<dd><p>具有指定 <i>name</i> 的請求 cookie 的值</p>

</dd>
<dt><tt>%cookie.value%</tt></dt>
<dd><p>在請求中找到的第一個 cookie 的值</p>

</dd>
<dt><tt>%datetime%</tt></dt>
<dd><p>系統日期</p>

</dd>
<dt><tt>%request%</tt></dt>
<dd><p>完整的 HTTP 請求行</p>

</dd>
<dt><tt>%status%</tt></dt>
<dd><p>狀態</p>

</dd>
<dt><tt>%response.length%</tt></dt>
<dd><p>回應內容長度</p>

</dd>
<dt><tt>%header.referer%</tt></dt>
<dd><p>推薦者標頭</p>

</dd>
<dt><tt>%header.user-agent%</tt></dt>
<dd><p>使用者代理程式標頭</p>

</dd>
<dt><tt>%http-method%</tt></dt>
<dd><p>HTTP 方法</p>

</dd>
<dt><tt>%http-uri%</tt></dt>
<dd><p>HTTP URI</p>

</dd>
<dt><tt>%query-str%</tt></dt>
<dd><p>HTTP 查詢字串</p>

</dd>
<dt><tt>%http-version%</tt></dt>
<dd><p>HTTP 協定版本</p>

</dd>
<dt><tt>%header.accept%</tt></dt>
<dd><p>接受標頭</p>

</dd>
<dt><tt>%header.date%</tt></dt>
<dd><p>日期標頭</p>

</dd>
<dt><tt>%header.if-mod-since%</tt></dt>
<dd><p>修改日期標頭</p>

</dd>
<dt><tt>%header.auth%</tt></dt>
<dd><p>授權標頭</p>

</dd>
<dt><tt>%header.<i>any</i>%</tt></dt>
<dd><p>RFC 2616 中定義的任何有效 HTTP 標頭 (<tt>any</tt> 也是有效的標頭值；此處將其指定為變數)</p>

</dd>
<dt><tt>%session.<i>name</i>%</tt></dt>
<dd><p>具有名稱 <i>name</i> 的階段作業屬性的值，或是 <tt>NULL-SESSION-ATTRIBUTE-<i>name</i></tt> (如果命名的屬性不存在階段作業中)，又或是 <tt>NULL-SESSION</tt> (如果沒有階段作業存在)</p>

</dd>
<dt><tt>%time-taken%</tt></dt>
<dd><p>處理每個請求所花的時間 (以毫秒為單位)</p>

</dd>
<dt><tt>%vs.id%</tt></dt>
<dd><p>虛擬伺服器識別碼</p>

</dd>
</dl>
</dd>
<dt>其他特性</dt>
<dd><p>HTTP 服務的其他特性。如需可用特性的說明，請參閱<a href="ref-httpserviceprops.html">HTTP 服務特有的特性</a>。</p>

</dd>
</dl>
<h5>相關作業</h5>

<ul><li><p><a href="task-accesslog.html">配置 HTTP 服務</a></p>

</li></ul>
<h5>相關的 <tt>asadmin</tt> 指令</h5>
<p>無。</p>



<small>版權所有 &#169; 2010, Oracle 和 (或) 其關係公司。 保留一切權利。 <a href="docinfo.html">法律聲明</a></small>
