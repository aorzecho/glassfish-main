<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009, 2010 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-jmsconnectionnew"></a><h4>创建 JMS 连接工厂资源</h4><a name="indexterm-1"></a><a name="indexterm-2"></a><p>创建 JMS 连接工厂时，GlassFish Server 会为该连接工厂创建连接器连接池和连接器资源。您可以在&#8220;连接器&#8221;节点下查看这些对象。</p>

<ol>
<li><b>在导航树中，展开&#8220;资源&#8221;节点。</b></li>
<li><b>在&#8220;资源&#8221;节点下，展开&#8220;JMS 资源&#8221;节点。</b></li>
<li><b>在&#8220;JMS 资源&#8221;节点下，选择&#8220;JMS 连接工厂&#8221;节点。</b><p>此时将打开&#8220;JMS 连接工厂&#8221;页面。</p></li>
<li><b>在&#8220;JMS 连接工厂&#8221;页面中，单击&#8220;新建&#8221;。</b><p>此时将显示&#8220;新建 JMS 连接工厂&#8221;页面。</p></li>
<li><b>在&#8220;池名称&#8221;字段中，键入连接工厂的唯一名称。 </b><p>GlassFish Server 将连接工厂的 JNDI 名称设置为该值。</p></li>
<li><b>从&#8220;资源类型&#8221;下拉式列表中，选择 <tt>javax.jms.ConnectionFactory</tt>、<tt>javax.jms.QueueConnectionFactory</tt> 或 <tt>javax.jms.TopicConnectionFactory</tt>。</b></li>
<li><b>在&#8220;说明&#8221;字段中，键入连接工厂的说明。</b></li>
<li><b>选择&#8220;启用状态&#8221;复选框以在运行时启用该资源。</b><p>默认情况下启用此选项。</p></li>
<li><b>在&#8220;初始和最小池大小&#8221;字段中，指定该池的最小连接数。</b><p>默认值为 8。</p></li>
<li><b>在&#8220;最大池大小&#8221;字段中，指定该池的最大连接数。</b><p>默认值为 32。</p></li>
<li><b>在&#8220;池大小调整数量&#8221;字段中，指定池空闲超时到期后要删除的连接数。</b><p>默认值为 2。</p></li>
<li><b>在&#8220;空闲超时&#8221;字段中，指定连接可在池中保持空闲的最长时间（以秒为单位）。</b><p>默认值为 300。</p></li>
<li><b>在&#8220;最长等待时间&#8221;字段中，指定请求连接的应用程序在连接超时之前等待的时间。</b><p>默认值为 60000。</p></li>
<li><b>选中&#8220;一旦失败则关闭所有连接&#8221;复选框，以便 GlassFish Server 在某个连接失败时关闭池中的所有连接并重新建立这些连接。</b><p>如果未选中此复选框，则仅当要使用各个连接时才会重新建立连接。默认情况下禁用此选项。</p></li>
<li><b>对于 JMS 连接工厂资源，请选择&#8220;事务支持&#8221;级别。</b><p>选择的值将以向下兼容方式覆盖&#8220;资源适配器&#8221;中的事务支持属性。</p><ul>
<li><b>对于在事务范围内使用多个资源的事务，为其所用的资源选择 XATransaction（&#8220;JMS 资源适配器&#8221;的默认值）。</b><p>例如，事务可能涉及此资源和 JDBC 资源、连接器资源或其他 JMS 连接工厂资源。此值提供最大的灵活性。配置为 XATransaction 的资源将参与分为两个阶段的提交操作。</p></li>
<li><b>对于事务（仅在事务范围内使用的唯一一种资源）可以使用的资源或在使用多个 XA 资源的分布式事务中用作最后一个代理的资源，选择 LocalTransaction。</b><p>此值提供更好的性能。配置为 LocalTransaction 的资源将不会参与分为两个阶段的提交操作。</p></li>
<li><b>对于永远无法参与事务的资源，选择 NoTransaction。</b><p>JMS 应用程序中限用此设置。</p></li></ul></li>
<li><b>选中&#8220;需要连接验证&#8221;复选框，以启用连接验证。</b><p>如果选中此选项，则先验证连接，然后才将其提供给应用程序。如果资源验证失败，则销毁此资源，然后创建并返回一个新的资源。默认情况下禁用此选项。</p></li>
<li>（可选的）<b>在&#8220;其他属性&#8221;部分中，指定连接工厂的其他属性。</b><p>有关可用属性的信息，请参见<a href="ref-jmsconnectionproperties.html">特定于 JMS 连接工厂的属性</a>。</p><p>要添加属性，请单击&#8220;添加属性&#8221;按钮。在显示的空白行中，在&#8220;名称&#8221;字段中键入属性名称，在&#8220;值&#8221;字段中键入属性值。</p></li>
<li><b>单击&#8220;确定&#8221;。</b></li></ol><h6>另请参见</h6>
<ul><li><p><a href="task-jmsconnectionedit.html">编辑 JMS 连接工厂资源</a></p>

</li>
<li><p><a href="task-jmsconnectiondelete.html">删除 JMS 连接工厂资源</a></p>

</li>
<li><p><a href="task-jmsdestinationnew.html">创建 JMS 目的地资源</a></p>

</li>
<li><p><a href="task-jmsdestinationedit.html">编辑 JMS 目的地资源</a></p>

</li>
<li><p><a href="task-jmsdestinationdelete.html">删除 JMS 目的地资源</a></p>

</li></ul>


<small>版权所有 &#169; 2010, Oracle 和/或其附属公司。 保留所有权利。 <a href="docinfo.html">法律声明</a></small>
