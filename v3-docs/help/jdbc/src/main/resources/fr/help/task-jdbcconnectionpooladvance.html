<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2005, 2012 Oracle and/or its affiliates. All rights reserved.

Use is subject to License Terms  -->
<p><a id="task-jdbcconnectionpooladvance" name="task-jdbcconnectionpooladvance"></a><a id="GHJDB00038" name="GHJDB00038"></a></p>

<h4><a id="sthref19" name="sthref19"></a>Modifier les attributs avanc&eacute;s du pool de connexions JDBC</h4>
<a name="BEGIN" id="BEGIN"></a>
<ol>
<li>
<p>Dans l'arborescence de navigation, d&eacute;veloppez le noeud Ressources.</p>
</li>
<li>
<p>Sous le noeud Ressources, s&eacute;lectionnez le noeud JDBC.</p>
</li>
<li>
<p>Sous le noeud JDBC, s&eacute;lectionnez le noeud Pools de connexions.</p>
<p>La page Pools de connexions appara&icirc;t.</p>
</li>
<li>
<p>Dans la page Pools de connexions, cliquez sur le nom du pool &agrave; modifier.</p>
<p>La page Modifier le pool de connexions appara&icirc;t.</p>
</li>
<li>
<p>Dans la page Modifier le pool de connexions, cliquez sur l'onglet Avanc&eacute;.</p>
<p>La page Modifier les attributs avanc&eacute;s du pool de connexions appara&icirc;t.</p>
</li>
<li>
<p>Dans le champ Temporisation de l'instruction, entrez le d&eacute;lai, en secondes, au-del&agrave; duquel les requ&ecirc;tes dont l'ex&eacute;cution est anormalement longue sont abandonn&eacute;es.</p>
<p>GlassFish&nbsp;Server d&eacute;finit la valeur de <code>QueryTimeout</code> sur les instructions cr&eacute;&eacute;es. D&eacute;finissez la valeur sur&nbsp;-1 pour d&eacute;sactiver cette option. La valeur par d&eacute;faut est&nbsp;-1.</p>
</li>
<li>
<p>Dans le champ Taille du cache d'instruction, entrez le nombre d'instructions devant &ecirc;tre mises en m&eacute;moire cache &agrave; l'aide du syst&egrave;me de mise en m&eacute;moire cache LRU (utilis&eacute; le moins r&eacute;cemment).</p>
<p>Pour d&eacute;sactiver la mise en m&eacute;moire cache des instructions, entrez la valeur&nbsp;0. La valeur par d&eacute;faut est&nbsp;0.</p>
</li>
<li>
<p>Dans le champ Init. SQL, entrez une cha&icirc;ne SQL &agrave; ex&eacute;cuter lors de la cr&eacute;ation (mais pas de la r&eacute;utilisation) d'une connexion dans le pool.</p>
<p>L'ex&eacute;cution de cette cha&icirc;ne initialise l'&eacute;tat de la connexion.</p>
</li>
<li>
<p>Dans le champ Processus d'&eacute;coute de trace SQL, entrez une liste de noms de classe d'impl&eacute;mentation de processus d'&eacute;coute, s&eacute;par&eacute;s par des virgules, pour indiquer que les instructions SQL ex&eacute;cut&eacute;es par les applications sont suivies.</p>
<p>Les classes de processus d'&eacute;coute doivent impl&eacute;menter l'interface <code>org.glassfish.api.jdbc.SQLTraceListener</code>. L'utilisation de processus d'&eacute;coute facilite le filtrage des messages du fichier journal des instructions SQL et aide les administrateurs &agrave; analyser ces instructions.</p>
</li>
<li>
<p>Cochez la case Activ&eacute; du champ Encapsuler les objets JDBC pour que les applications obtiennent des objets JDBC encapsul&eacute;s pour les &eacute;l&eacute;ments <code>Statement</code>, <code>PreparedStatement</code>, <code>CallableStatement</code>, <code>ResultSet</code> et <code>DatabaseMetaData</code>.</p>
<p>Cette option est activ&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Cochez la case Groupement pour activer le groupement des connexions du pool.</p>
<p>Cette option est activ&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Dans le champ Valider une fois au plus, saisissez le d&eacute;lai, en secondes, au bout duquel une connexion est valid&eacute;e une fois au plus.</p>
<p>La d&eacute;finition de cet attribut sur une valeur appropri&eacute;e r&eacute;duit le nombre de demandes de validation &eacute;manant d'une connexion. La valeur par d&eacute;faut est&nbsp;0, ce qui signifie que l'attribut n'est pas activ&eacute;.</p>
</li>
<li>
<p>Dans le champ Temporisation de la perte de connexion, saisissez la dur&eacute;e, en secondes, n&eacute;cessaire au suivi des pertes de connexion dans un pool de connexions.</p>
<p>Ce champ permet de d&eacute;tecter les &eacute;ventuelles pertes de connexion de l'application. Une connexion non renvoy&eacute;e au pool par l'application dans l'intervalle sp&eacute;cifi&eacute; est soup&ccedil;onn&eacute;e de pr&eacute;senter une perte. La trace de pile de l'appelant est alors consign&eacute;e dans le journal. D&eacute;finissez la valeur sur&nbsp;0 pour d&eacute;sactiver le suivi des pertes de connexion. La valeur par d&eacute;faut est&nbsp;0.</p>
<p>Utilisez ce champ avec le champ R&eacute;cup&eacute;ration de la perte de connexion pour &eacute;viter tout risque de perte de connexion de l'application.</p>
</li>
<li>
<p>Cochez la case R&eacute;cup&eacute;ration de la perte de connexion pour restaurer les connexions pr&eacute;sentant des pertes dans le pool une fois le suivi des pertes de connexion termin&eacute;.</p>
<p>Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Dans le champ Temporisation de la perte d'instruction, saisissez la dur&eacute;e, en secondes, n&eacute;cessaire au suivi des pertes d'instruction dans un pool de connexions.</p>
<p>Ce champ permet de d&eacute;tecter les &eacute;ventuelles pertes d'instruction de l'application. Une instruction non renvoy&eacute;e au pool par l'application dans l'intervalle sp&eacute;cifi&eacute; est soup&ccedil;onn&eacute;e de pr&eacute;senter une perte. La trace de pile de l'appelant est alors consign&eacute;e dans le journal. D&eacute;finissez la valeur sur&nbsp;0 pour d&eacute;sactiver le suivi des pertes d'instruction. La valeur par d&eacute;faut est&nbsp;0.</p>
<p>Utilisez ce champ avec le champ R&eacute;cup&eacute;ration de perte d'instruction pour &eacute;viter tout risque de perte d'instruction de l'application.</p>
</li>
<li>
<p>Cochez la case R&eacute;cup&eacute;ration de perte d'instruction pour restaurer les instructions pr&eacute;sentant des pertes dans le pool une fois le suivi des pertes d'instruction termin&eacute;.</p>
<p>Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Dans le champ Tentatives de cr&eacute;ation, saisissez le nombre de tentatives effectu&eacute;es en cas d'&eacute;chec de cr&eacute;ation d'une connexion.</p>
<p>D&eacute;finissez la valeur sur&nbsp;0 pour annuler les tentatives de recr&eacute;ation de la connexion. La valeur par d&eacute;faut est&nbsp;0.</p>
</li>
<li>
<p>Dans le champ Intervalle entre les tentatives, saisissez l'intervalle, en secondes, entre deux tentatives de cr&eacute;ation d'une connexion.</p>
<p>La valeur par d&eacute;faut est&nbsp;10. Cet attribut n'est utilis&eacute; que si la valeur de l'option Tentatives de cr&eacute;ation est sup&eacute;rieure &agrave;&nbsp;0.</p>
</li>
<li>
<p>Cochez la case Activ&eacute; du champ Association lazy pour n'associer une connexion physique &agrave; une collection logique que lorsque la connexion est utilis&eacute;e.</p>
<p>Les connexions sont dissoci&eacute;es lorsque la transaction est termin&eacute;e et qu'une m&eacute;thode de composant prend fin, ce qui facilite la r&eacute;utilisation des connexions physiques. Si cette option est d&eacute;sactiv&eacute;e, une connexion physique est associ&eacute;e &agrave; une connexion logique avant m&ecirc;me d'&ecirc;tre utilis&eacute;e. Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Cochez la case Activ&eacute; du champ Participation des connexions lazy &agrave; la transaction pour engager une ressource dans une transaction uniquement lorsqu'elle est utilis&eacute;e dans une m&eacute;thode.</p>
<p>Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Cochez la case Activ&eacute; du champ Associer au thread pour cr&eacute;er des associations entre des connexions et des threads.</p>
<p>Lorsqu'un thread n&eacute;cessite une autre connexion, il peut r&eacute;utiliser celle qui lui est d&eacute;j&agrave; associ&eacute;e, limitant ainsi le temps syst&egrave;me li&eacute; &agrave; l'obtention d'une connexion &agrave; partir du pool. Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Cochez la case Activ&eacute; du champ Faire correspondre les connexions pour activer la mise en correspondance des connexions du pool.</p>
<p>Si cette option est activ&eacute;e, une connexion s&eacute;lectionn&eacute;e dans le pool doit &ecirc;tre mise en correspondance avec les connexions disposant de certaines informations d'identification et de connexion. Cette option doit &ecirc;tre activ&eacute;e si le pool de connexions est utilis&eacute; par des applications disposant de plusieurs informations d'identification et de connexion utilisateur. Cette option peut &ecirc;tre d&eacute;sactiv&eacute;e si l'administrateur sait que les connexions du pool seront toujours homog&egrave;nes et qu'il est donc inutile pour l'adaptateur de ressource d'associer une connexion emprunt&eacute;e au pool. Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Dans le champ Utilisation maximale des connexions, saisissez le nombre de r&eacute;utilisations possibles d'une connexion par le pool.</p>
<p>Une fois qu'une connexion a &eacute;t&eacute; r&eacute;utilis&eacute;e le nombre de fois sp&eacute;cifi&eacute;, elle est ferm&eacute;e. En limitant le nombre de r&eacute;utilisations d'une connexion, vous pouvez &eacute;viter les pertes d'instruction lorsqu'une application ne ferme pas les instructions. D&eacute;finissez la valeur sur&nbsp;0 pour d&eacute;sactiver cet attribut. La valeur par d&eacute;faut est&nbsp;0.</p>
</li>
<li>
<p>Cochez la case Requis du champ Validation des connexions pour activer la validation des connexions.</p>
<p>La validation des connexions permet au serveur de se reconnecter en cas d'&eacute;chec.</p>
</li>
<li>
<p>Dans la liste d&eacute;roulante M&eacute;thode de validation, s&eacute;lectionnez une m&eacute;thode de validation.</p>
<p>GlassFish&nbsp;Server peut valider les connexions &agrave; la base de donn&eacute;es de l'une des mani&egrave;res suivantes.</p>
<dl>
<dt><code>auto-commit</code> et <code>metadata</code></dt>
<dd>
<p>GlassFish&nbsp;Server valide une connexion en appelant les m&eacute;thodes <code>con.getAutoCommit</code> et <code>con.getMetaData</code>.</p>

<hr>
<p><b>Remarque:</b></p>
La plupart des pilotes JDBC mettent en m&eacute;moire cache le r&eacute;sultat de ces appels. Par cons&eacute;quent, l'utilisation de ces appels ne donne pas toujours une validation fiable. Contactez votre fournisseur de pilote pour savoir si ces appels sont mis en m&eacute;moire cache ou non.
<hr>

</dd>
<dt><code>custom-validation</code></dt>
<dd>
<p>GlassFish&nbsp;Server utilise un m&eacute;canisme de validation d&eacute;fini par l'utilisateur sp&eacute;cifi&eacute; par la classe d'impl&eacute;mentation personnalis&eacute;e dans le champ Nom de classe de validation.</p>
</dd>
<dt><code>table</code></dt>
<dd>
<p>L'application interroge la table de base de donn&eacute;es sp&eacute;cifi&eacute;e. La table doit exister et &ecirc;tre accessible mais ne requiert aucune ligne. N'utilisez pas une table existante comportant un nombre important de lignes ou une table d&eacute;j&agrave; fr&eacute;quemment consult&eacute;e.</p>
</dd>
</dl>
</li>
<li>
<p>Si vous s&eacute;lectionnez <code>table</code> dans la liste d&eacute;roulante M&eacute;thode de validation, entrez le nom de la table de base de donn&eacute;es ou s&eacute;lectionnez-le dans la liste d&eacute;roulante Nom de la table.</p>
</li>
<li>
<p>Si vous s&eacute;lectionnez <code>custom-validation</code> dans la liste d&eacute;roulante M&eacute;thode de validation, entrez le nom de la classe d'impl&eacute;mentation de la validation personnalis&eacute;e ou s&eacute;lectionnez-le dans la liste d&eacute;roulante Nom de classe de validation.</p>
<p>GlassFish&nbsp;Server doit pouvoir acc&eacute;der au nom de classe indiqu&eacute;. La classe sp&eacute;cifi&eacute;e doit impl&eacute;menter l'interface <code>org.glassfish.api.jdbc.ConnectionValidation</code>.</p>
</li>
<li>
<p>Cochez la case Fermer toutes les connexions du champ Echec sur tout pour que le serveur ferme et r&eacute;tablisse toutes les connexions du pool en cas d'&eacute;chec de l'une d'entre elles.</p>
<p>Si cette option est d&eacute;sactiv&eacute;e, les connexions individuelles ne sont r&eacute;tablies que lorsqu'elles sont utilis&eacute;es. Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Cochez la case Activ&eacute; du champ Autoriser des programmes appelants non-composant de sorte que le pool puisse &ecirc;tre utilis&eacute; par des programmes appelants autres que des composants, tels que des filtres de servlet et des gestionnaires de persistance tiers.</p>
<p>Les connexions obtenues par des programmes appelants autres que des composants ne sont pas automatiquement ferm&eacute;es par le conteneur &agrave; la fin d'une transaction. Elles doivent &ecirc;tre explicitement ferm&eacute;es par le programme appelant. Cette option est d&eacute;sactiv&eacute;e par d&eacute;faut.</p>
</li>
<li>
<p>Cliquez sur le bouton Vider de l'onglet G&eacute;n&eacute;ral pour vider toutes les connexions du pool.</p>
<p>Cliquez sur le bouton Vider revient &agrave; d&eacute;truire toutes les connexions existantes, &agrave; recr&eacute;er les connexions &eacute;tablies pour le pool et &agrave; restaurer le pool &agrave; sa taille initiale et minimale.</p>
</li>
<li>
<p>Cliquez sur Enregistrer.</p>

<hr>
<p><b>Conseil:</b></p>
Pour revenir aux param&egrave;tres par d&eacute;faut, cliquez sur le bouton Charger les valeurs par d&eacute;faut, puis sur Enregistrer.
<hr>

</li>
</ol>
<a id="sthref20" name="sthref20"></a>
<h5>Voir aussi</h5>
<ul>
<li>
<p><a href="task-setdbaccess.html">Param&eacute;trer l'acc&egrave;s &agrave; une base de donn&eacute;es</a></p>
</li>
<li>
<p><a href="task-integratejdbcdriver.html">Int&eacute;grer un pilote JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcresourcenew.html">Cr&eacute;er une ressource JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcresourcesedit.html">Modifier une ressource JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcresourcetargets.html">Modifier les cibles de ressources JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcresourcesdelete.html">Supprimer une ressource JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcconnectionpoolnew.html">Cr&eacute;er un pool de connexions JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcconnectionpooledit.html">Modifier les param&egrave;tres g&eacute;n&eacute;raux d'un pool de connexions JDBC</a></p>
</li>
<li>
<p><a href="task-verifyconnpoolsettings.html">V&eacute;rifier les param&egrave;tres d'un pool de connexions</a></p>
</li>
<li>
<p><a href="task-jdbcconnectionpoolproperty.html">Modifier les propri&eacute;t&eacute;s d'un pool de connexions JDBC</a></p>
</li>
<li>
<p><a href="task-jdbcconnectionpooldelete.html">Supprimer un pool de connexions JDBC</a></p>
</li>
</ul>


<small>Copyright &#169; 2005, 2012, Oracle and/or its affiliates. All rights reserved. <a href="docinfo.html">Legal Notices</a></small>
