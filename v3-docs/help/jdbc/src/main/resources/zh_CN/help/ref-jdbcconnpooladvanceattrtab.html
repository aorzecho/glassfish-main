<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009, 2010 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->
<a name="ref-jdbcconnpooladvanceattrtab"></a><h4>编辑连接池高级属性</h4>
<a name="indexterm-24"></a><p>使用&#8220;编辑连接池高级属性&#8221;页面可以指定一些属性，帮助诊断连接泄漏和提高易用性。</p>

<p>&#8220;编辑连接池高级属性&#8221;页面包含以下选项。</p>

<dl><dt>装入默认值</dt>
<dd><p>用于恢复所有设置的默认值的按钮。</p>

</dd>
<dt>池名称</dt>
<dd><p>连接池的名称。名称是只读字段。您只有在创建新的 JDBC 连接池时才能指定连接池名称。</p>

</dd>
<dt>语句超时</dt>
<dd><p>以秒为单位的一段时间，经过这段时间后，将终止运行时间异常长的查询。GlassFish Server 将对创建的语句设置 "<tt>QueryTimeout</tt>"。值为 &#8211;1 表示已禁用此选项。默认值为 &#8211;1。</p>

</dd>
<dt>语句高速缓存大小</dt>
<dd><p>要使用 LRU（最近最少使用）高速缓存机制来高速缓存的语句数。如果值为 0，则将禁用语句高速缓存。默认值为 0。</p>

</dd>
<dt>初始化 SQL</dt>
<dd><p>每次在池中创建（不是重复使用）连接时要执行的 SQL 字符串。执行此字符串可以初始化连接的状态。</p>

</dd>
<dt>SQL 跟踪侦听器</dt>
<dd><p>逗号分隔的侦听器实现类名列表，该列表指定将跟踪应用程序执行的 SQL 语句。侦听器类必须实现 <tt>org.glassfish.api.jdbc.SQLTraceListener</tt> 接口。使用侦听器可以轻松地过滤 SQL 语句的日志消息，并帮助管理员分析语句。 </p>

</dd>
<dt>包装 JDBC 对象</dt>
<dd><p>如果启用此选项，则应用程序将获取 Statement、PreparedStatement、CallableStatement、ResultSet、DatabaseMetaData 的包装 JDBC 对象。默认情况下启用此选项。</p>

</dd>
<dt>入池</dt>
<dd><p>启用池的连接入池。默认情况下启用此选项。</p>

</dd>
<dt>最多验证一次</dt>
<dd><p>指定连续请求验证连接（最多一次）之间的时间间隔（以秒为单位）。将该属性设置为适当的值可以最大程度减少连接的验证请求数。默认值为 0，表示未启用该属性。</p>

</dd>
<dt>泄漏超时</dt>
<dd><p>以秒为单位的一段时间，在这段时间内跟踪连接池中的连接泄漏。使用此字段可以检测应用程序的潜在连接泄漏。如果应用程序未在指定时间段内将连接返回到池，则假定该连接可能发生了泄漏，并将记录调用方的堆栈跟踪。如果值为 0，则表示已禁用连接泄漏跟踪。默认值为 0。</p>

<p>使用此字段和&#8220;泄漏回收&#8221;可以避免应用程序的潜在连接泄漏。</p>

</dd>
<dt>泄漏回收</dt>
<dd><p>如果启用此选项，则泄漏的连接将在泄漏连接跟踪完成后恢复到池中。默认情况下禁用此选项。</p>

</dd>
<dt>创建重试尝试</dt>
<dd><p>当创建新的连接失败后，进行尝试的次数。如果值为 0，则表示不会尝试再次创建连接。默认值为 0。</p>

</dd>
<dt>重试时间间隔</dt>
<dd><p>两次尝试创建连接之间的时间间隔（以秒为单位）。默认值为 10。仅在&#8220;创建重试尝试&#8221;值大于 0 时才使用该属性。</p>

</dd>
<dt>延迟关联</dt>
<dd><p>如果启用此选项，则仅在使用连接时，才将物理连接与逻辑连接关联。当完成事务并且结束组件方法时，对连接取消关联，这有助于重新使用物理连接。默认情况下禁用此选项。</p>

</dd>
<dt>延迟连接获取</dt>
<dd><p>如果启用此选项，则仅当在方法中实际使用某个资源时，才将该资源登记到事务。默认情况下禁用此选项。</p>

</dd>
<dt>与线程关联</dt>
<dd><p>如果启用此选项，则将连接与线程关联，从而当同一线程需要使用连接时，能够重复使用已与该线程关联的连接，因此不会导致产生从池中获取连接的系统开销。默认情况下禁用此选项。</p>

</dd>
<dt>匹配连接</dt>
<dd><p>如果启用此选项，则从池中选择的连接应与具有特定凭证的连接相匹配。如果连接池由具有多个用户凭证的应用程序使用，则必须启用此选项。如果管理员知道池中的连接始终同构，因此从池中选择的连接不需要由资源适配器进行匹配，则可以安全地禁用此选项。默认情况下禁用此选项。</p>

</dd>
<dt>最大连接使用</dt>
<dd><p>池可以重新使用连接的次数。连接在重复使用指定的次数后将被关闭。通过限制可以重复使用连接的次数，可在应用程序没有关闭语句的情况下避免语句泄漏。值为 0 表示已禁用此属性。默认值为 0。</p>

</dd>
<dt>连接验证</dt>
<dd><p>如果启用此选项，将要求进行连接验证，允许服务器在出现故障时重新连接。</p>

</dd>
<dt>验证方法</dt>
<dd><p>GlassFish Server 可以通过以下方式验证数据库连接。</p>

<dl><dt><tt>auto-commit</tt> 和 <tt>metadata</tt></dt>
<dd><p>GlassFish Server 通过调用 <tt>con.getAutoCommit</tt> 或 <tt>con.getMetaData</tt> 方法来验证连接。 </p>


<hr><p><b>注 - </b>许多 JDBC 驱动程序都会高速缓存这些调用的结果。因此，使用这些调用可能无法始终提供可靠的验证。请与驱动程序供应商进行核实，以确定这些调用是否被高速缓存。</p>


<hr>
</dd>
<dt><tt>custom-validation</tt></dt>
<dd><p>GlassFish Server 使用由&#8220;验证类名&#8221;字段中的自定义实现类指定的用户定义验证机制。</p>

</dd>
<dt><tt>table</tt></dt>
<dd><p>应用程序将查询指定的数据库表。表必须存在并且可以访问，但其中不必含有任何行。请勿使用包含许多行的现有表或已被经常访问的表。</p>

</dd>
</dl>
</dd>
<dt>表名称</dt>
<dd><p>用于验证的数据库表的名称。仅当&#8220;验证方法&#8221;设置为 <tt>table</tt> 时，此字段才适用。</p>

</dd>
<dt>验证类名</dt>
<dd><p>自定义验证实现类名。仅当&#8220;验证方法&#8221;设置为 <tt>custom-validation</tt> 时，此字段才适用。提供的类名必须是 GlassFish Server 可以访问的。指定的类必须实现 <tt>org.glassfish.api.jdbc.ConnectionValidation</tt> 接口。</p>

</dd>
<dt>一旦失败</dt>
<dd><p>如果启用此选项，则 GlassFish Server 将在任何连接失败时关闭池中的所有连接并重新建立这些连接。如果禁用此选项，则仅在使用各个连接时才重新建立这些连接。默认情况下禁用此选项。</p>

</dd>
<dt>允许非组件调用方</dt>
<dd><p>如果启用此选项，则池可由非组件调用方（如 Servlet 过滤器和第三方持久性管理器）使用。在事务结束时，容器不会自动关闭非组件调用方获取的连接。这些连接必须由调用方显式关闭。默认情况下禁用此选项。</p>

</dd>
</dl>
<a name="gkonw"></a><h5>相关任务</h5>

<ul><li><p><a href="task-setdbaccess.html">设置数据库访问</a></p>

</li>
<li><p><a href="task-integratejdbcdriver.html">集成 JDBC 驱动程序</a></p>

</li>
<li><p><a href="task-jdbcconnectionpoolnew.html">创建 JDBC 连接池</a></p>

</li>
<li><p><a href="task-jdbcconnectionpooledit.html">编辑 JDBC 连接池常规设置</a></p>

</li>
<li><p><a href="task-verifyconnpoolsettings.html">验证连接池设置</a></p>

</li>
<li><p><a href="task-jdbcconnectionpooladvance.html">编辑 JDBC 连接池高级属性</a></p>

</li>
<li><p><a href="task-jdbcconnectionpoolproperty.html">编辑 JDBC 连接池属性</a></p>

</li>
<li><p><a href="task-jdbcconnectionpooldelete.html">删除 JDBC 连接池</a></p>

</li></ul>
<a name="gkoli"></a><h5>相关的 <tt>asadmin</tt> 命令</h5>

<ul><li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=add-resources-1"><tt>add-resources</tt>(1)</a></p>

</li>
<li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=create-jdbc-connection-pool-1"><tt>create-jdbc-connection-pool</tt>(1)</a></p>

</li>
<li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=delete-jdbc-connection-pool-1"><tt>delete-jdbc-connection-pool</tt>(1)</a></p>

</li>
<li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=list-jdbc-connection-pools-1"><tt>list-jdbc-connection-pools</tt>(1)</a></p>

</li>
<li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=ping-connection-pool-1"><tt>ping-connection-pool</tt>(1)</a></p>

</li>
<li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=start-database-1"><tt>start-database</tt>(1)</a></p>

</li>
<li><p><a href="http://www.oracle.com/pls/topic/lookup?ctx=821-2433&id=stop-database-1"><tt>stop-database</tt>(1)</a></p>

</li></ul>


<small>版权所有 &#169; 2010, Oracle 和/或其附属公司。 保留所有权利。 <a href="docinfo.html">法律声明</a></small>
