<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009, 2010 Oracle and/or its affiliates. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-jdbcconnectionpooladvance"></a><h4>編輯 JDBC 連線池進階屬性</h4><a name="indexterm-11"></a><ol>
<li><b>在瀏覽樹狀結構中，展開 [資源] 節點。</b></li>
<li><b>在 [資源] 節點下，選取 [JDBC] 節點。</b></li>
<li><b>在 [JDBC] 節點下，選取 [連線池] 節點。</b><p>[連線池] 頁面會隨即開啟。</p></li>
<li><b>在 [連線池] 頁面上，按一下您要編輯的池名稱。</b><p>[編輯連線池] 頁面會隨即開啟。</p></li>
<li><b>在 [編輯連線池] 頁面上，按一下 [進階] 標籤。</b><p>[編輯連線池進階屬性] 頁面會隨即開啟。</p></li>
<li><b>在 [敘述逾時] 欄位中，鍵入在終止執行時間過長的查詢之前，需等待的時間長度 (以秒為單位)。</b><p>GlassFish Server 將對建立的敘述設定 <tt>QueryTimeout</tt>。將值設定為 -1 以停用此選項。預設值為 -1。</p></li>
<li><b>在 [陳述式快取大小] 欄位中，鍵入要使用 LRU (近來最少使用) 快取機制快取的陳述式數目。</b><p>若要停用陳述式快取，請指定 0 值。預設值為 0。</p></li>
<li><b>在 [初始化 SQL] 欄位中，鍵入每當在池中建立 (不是重複使用) 連線時會執行的 SQL 字串。</b><p>執行此字串會初始化連線狀態。</p></li>
<li><b>在 [SQL 追蹤偵聽程式] 欄位中，鍵入以逗號分隔的偵聽程式實作類別名稱清單，指定追蹤應用程式執行的 SQL 陳述式。</b><p>偵聽程式類別必須實作 <tt>org.glassfish.api.jdbc.SQLTraceListener</tt> 介面。使用偵聽程式能讓您針對 SQL 陳述式輕鬆篩選記錄訊息，且能幫助管理員分析陳述式。</p></li>
<li><b>選取 [啟用包裝 JDBC 物件] 核取方塊，可讓應用程式取得 <tt>Statement</tt>、<tt>PreparedStatement</tt>、<tt>CallableStatement</tt>、<tt>ResultSet</tt>、<tt>DatabaseMetaData</tt> 的包裝 JDBC 物件。 </b><p>此選項預設為啟用。</p></li>
<li><b>選取 [池儲存] 核取方塊可針對池啟用連線池儲存。</b><p>此選項預設為啟用。</p></li>
<li><b>在 [驗證間隔最久時間] 欄位中，鍵入到達驗證連線間隔最長時間之前，等待的時間長度 (以秒為單位)。</b><p>將此屬性設定為適當值，可將驗證連線請求的數目減至最小。預設值為 0，表示未啟用該屬性。</p></li>
<li><b>在 [錯誤逾時] 欄位中，鍵入追蹤連線池中錯誤連線的時間長度 (以秒為單位)。</b><p>使用此欄位可偵測應用程式造成的潛在連線錯誤。若應用程式未於指定期間內將連線傳回池，則會假設連線可能發生錯誤，並會記錄呼叫者的堆疊追蹤。將該值設定為 0 會停用連線錯誤追蹤。預設值為 0。</p><p>將此欄位與 [錯誤收回] 欄位配合使用，可避免應用程式造成的潛在連線錯誤。</p></li>
<li><b>選取 [錯誤收回] 核取方塊，可在連線錯誤追蹤完成之後，將錯誤連線復原至池。</b><p>此選項預設為停用。</p></li>
<li><b>在 [建立重新嘗試次數] 欄位中，鍵入建立新連線失敗之後，將進行的嘗試次數。</b><p>將該值設定為 0 則不會重新嘗試建立連線。預設值為 0。</p></li>
<li><b>在 [重試間隔] 欄位中，鍵入兩次嘗試建立連線之間的時間間隔 (以秒為單位)。</b><p>預設值為 10。僅當 [建立重新嘗試次數] 的值大於 0 時，才使用該屬性。</p></li>
<li><b>選取 [啟用惰性關聯] 核取方塊，即可僅在使用連線時，才會將實體連線與邏輯集合關聯。</b><p>當作業事件完成且元件方法結束時，這些連線便會取消關聯，從而可以重複使用實體連線。若停用此選項，在使用連線前，實體連線即會與邏輯集合關聯。此選項預設為停用。</p></li>
<li><b>選取 [啟用惰性連線登記] 核取方塊，即可僅在資源實際用於方法中時，才將資源登記至作業事件。</b><p>此選項預設為停用。</p></li>
<li><b>選取 [啟用與執行緒建立關聯] 核取方塊，可建立連線與執行緒之間的關聯。</b><p>當相同的執行緒需要其他連線時，便可以重複使用已與該執行緒建立關聯的連線，而省下從池中取得另一個連線的經常性耗用時間。此選項預設為停用。</p></li>
<li><b>選取 [啟用比對連線] 核取方塊，可啟用池的連線比對功能。</b><p>若啟用此選項，會將從池中選取的連線與具有特定憑證的連線加以比對。如果連線池是供具有多個使用者憑證的應用程式使用，則必須啟用此選項。您可以在以下情況下停用此選項：管理員知道池中的連線一定是同質連線，因此不需要資源配接卡對從池中挑選的連線進行比對。此選項預設為停用。</p></li>
<li><b>在 [連線的最多使用次數] 欄位中，鍵入池重複使用連線的次數。</b><p>重複使用指定次數的連線後，就會關閉連線。您可以透過限制連線可重複使用的次數，避免在應用程式未關閉陳述式時，發生陳述式錯誤。將該值設定為 0 可停用此屬性。預設值為 0。</p></li>
<li><b>選取 [需要連線驗證] 核取方塊以啟用連線驗證。</b><p>連線驗證可讓伺服器在失敗時重新連線。</p></li>
<li><b>從 [驗證方法] 下拉式清單中，選取一種驗證方法。</b><p>GlassFish Server 可使用以下方式驗證資料庫連線。</p><dl><dt><tt>auto-commit</tt> 和 <tt>metadata</tt></dt>
<dd><p>GlassFish Server 會透過呼叫 <tt>con.getAutoCommit</tt> 和 <tt>con.getMetaData</tt> 方法驗證連線。 </p>


<hr><p><b>備註 - </b>許多 JDBC 驅動程式會快取這些呼叫的結果。因此，使用這些呼叫不一定能提供可靠的驗證。請與驅動程式供應商進行核實，以確定這些呼叫是否被快取。</p>


<hr>
</dd>
<dt><tt>custom-validation</tt></dt>
<dd><p>GlassFish Server 會使用 [驗證類別名稱] 欄位中的自訂實作類別所指定的使用者定義驗證機制。</p>

</dd>
<dt><tt>table</tt></dt>
<dd><p>應用程式會查詢指定的資料庫表格。此表格必須存在並且可以存取，但不要求表格的列數。請勿使用包含許多列的現有表格或經常存取的表格。</p>

</dd>
</dl>
</li>
<li><b>如果在 [驗證方法] 下拉式清單中選取 <tt>table</tt>，請在 [表格名稱] 下拉式清單中選取資料庫表格的名稱。</b></li>
<li><b>如果在 [驗證方法] 下拉式清單中選取 <tt>custom-validation</tt>，請鍵入自訂驗證實作類別名稱。</b><p>GlassFish Server 必須可以存取提供的類別名稱。指定的類別必須實作 <tt>org.glassfish.api.jdbc.ConnectionValidation</tt> 介面。</p></li>
<li><b>選取 [一旦失敗便關閉所有連線] 核取方塊，可在任何一個連線失敗時，由伺服器關閉池中的所有連線並重新建立連線。</b><p>若停用此選項，則僅會在使用連線時重新建立個別連線。此選項預設為停用。</p></li>
<li><b>選取 [啟用允許非元件呼叫者] 核取方塊，可允許非元件呼叫者 (例如 Servlet 篩選和第三方持續性管理員) 使用池。</b><p>非元件呼叫者所取得的連線，不會在作業事件結束時由容器自動關閉。這些連線必須由呼叫者明確地關閉。此選項預設為停用。</p></li>
<li>(可選擇) <b>按一下 [一般] 標籤上的 [清除寫入] 按鈕，清除池中的所有連線。</b><p>按一下 [清除] 按鈕可銷毀任何現有的連線、重新建立已針對連線池建立的連線，並將池復原為其初始與最小的池大小。</p></li>
<li><b>按一下 [儲存]。</b>
<hr><p><b>提示 - </b>若要回到預設設定，請按一下 [載入預設值] 按鈕，然後按一下 [儲存]。</p>


<hr>
</li></ol><h6>另請參閱</h6>
<ul><li><p><a href="task-setdbaccess.html">設定資料庫存取</a></p>

</li>
<li><p><a href="task-integratejdbcdriver.html">整合 JDBC 驅動程式</a></p>

</li>
<li><p><a href="task-jdbcresourcenew.html">建立 JDBC 資源</a></p>

</li>
<li><p><a href="task-jdbcresourcesedit.html">編輯 JDBC 資源</a></p>

</li>
<li><p><a href="task-jdbcresourcetargets.html">編輯 JDBC 資源目標</a></p>

</li>
<li><p><a href="task-jdbcresourcesdelete.html">刪除 JDBC 資源</a></p>

</li>
<li><p><a href="task-jdbcconnectionpoolnew.html">建立 JDBC 連線池</a></p>

</li>
<li><p><a href="task-jdbcconnectionpooledit.html">編輯 JDBC 連線池一般設定</a></p>

</li>
<li><p><a href="task-verifyconnpoolsettings.html">驗證連線池設定</a></p>

</li>
<li><p><a href="task-jdbcconnectionpoolproperty.html">編輯 JDBC 連線池特性</a></p>

</li>
<li><p><a href="task-jdbcconnectionpooldelete.html">刪除 JDBC 連線池</a></p>

</li></ul>


<small>版權所有 &#169; 2010, Oracle 和 (或) 其關係公司。 保留一切權利。 <a href="docinfo.html">法律聲明</a></small>
