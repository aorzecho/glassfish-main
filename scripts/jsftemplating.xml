<?xml version="1.0" encoding="iso-8859-1"?>

<project name="JSFTemplating source integration" default="build" basedir="..">

    <!-- import build.xml for init target and inherited properties -->
    <import file="${basedir}/build.xml"/>

    <!-- Update the next line when this changes -->
    <property name="jsftemplating.tag" value="JSFTEMPLATING_1_2_11"/> 
    <property name="version" value="1.2.11"/>
    <property name="groupId" value="com.sun.jsftemplating"/>
    <property name="jsftemplating.dir" value="${glassfish.external.dir}/jsftemplating"/>

    <target name="checkout" depends="init,check.svn" unless="skipCheckout">
       <svn.checkout 
            repo="${jsftemplating.svn.url}" dest="jsftemplating" />
    </target>

    <target name="build" depends="checkout">
        <mvn.get artifact="javaee:javaee-api:5"/>
        <copy failonerror="true" file="${maven.repo.local}/javaee/javaee-api/5/javaee-api-5.jar"
            tofile="${jsftemplating.dir}/lib/javaee.jar"/>
        <copy overwrite="true" file="${jsftemplating.dir}/build.properties.example"
            tofile="${jsftemplating.dir}/build.properties"/>
            
        <ant dir="${jsftemplating.dir}">
            <property name="glassfish-home" value="${jsftemplating.dir}"/>
            <target name="jar"/>
        </ant>
        
        <mvn.publish.local file="${jsftemplating.dir}/dist/jsftemplating.jar"
            artifactId="jsftemplating"
            groupId="${groupId}"
            version="${version}"/>
        <mvn.publish.local file="${jsftemplating.dir}/dist/jsftemplating-dt.jar"
            artifactId="jsftemplating-dt"
            groupId="${groupId}"
            version="${version}"/>
        <mvn.publish.local file="${jsftemplating.dir}/dist/jsftemplating-dynafaces-0.1.jar"
            artifactId="jsftemplating-dynafaces-0.1"
            groupId="${groupId}"
            version="${version}"/>
<!--
        <mvn.publish.local file="${jsftemplating.dir}/dist/jsftemplating-base.jar"
            groupId="${groupId}"
            artifactId="jsftemplating-base"
            version="${version}"/>
-->
    </target>
</project>
